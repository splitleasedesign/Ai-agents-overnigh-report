<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Split Lease - Host Overview (Loops and Modes Enhanced)</title>

    <!--
    ============================================================================
    LOOPS AND MODES REDESIGN
    ============================================================================
    This dashboard redesign implements Dan Saffer's Chapter 5 "Loops and Modes"
    principles from "Microinteractions: Designing with Details."

    Key Principles Applied:
    1. MODES (p.111-114): Clear View/Edit distinction with visual indicators
    2. SPRING-LOADED MODES (p.113): Hover-activated previews
    3. ONE-OFF MODES (p.113-114): Inline confirmation for irreversible actions
    4. PROGRESSIVE DISCLOSURE (p.119): First-time user hints, expandable sections
    5. PROGRESSIVE REDUCTION (p.119-120): Expert mode for experienced users
    6. LONG LOOPS (p.117-119): Session memory, behavioral adaptation
    7. RE-ROBUSTIFICATION (p.119-120): Return user handling

    Built on Run 011 Social Proof foundation (Cialdini principles retained).
    ============================================================================
    -->

    <style>
        /* ============================================================================
           UNIFIED DESIGN TOKENS
           From UI-Consistency-Audit-Final-Report.md
           ============================================================================ */
        :root {
            --color-primary: #31135D;
            --color-primary-dark: #1F0D3D;
            --color-primary-light: #5B5FCF;
            --color-success: #5B5FCF;
            --color-warning: #D97706;
            --color-danger: #DC2626;
            --color-gray-50: #F9FAFB;
            --color-gray-100: #F3F4F6;
            --color-gray-200: #E5E7EB;
            --color-gray-300: #D1D5DB;
            --color-gray-500: #6B7280;
            --color-gray-700: #374151;
            --color-gray-800: #1F2937;
            --radius-sm: 4px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.08);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.12);
            --shadow-lg: 0 8px 24px rgba(0,0,0,0.16);
        }

        /* Legacy variable mappings for backward compatibility */
        :root {
            --primary-purple: var(--color-primary);
            --primary-purple-light: var(--color-primary-light);
            --accent-indigo: var(--color-success);
            --accent-orange: var(--color-warning);
            --accent-blue: #36C5F0;
            --warning-red: var(--color-danger);
            --text-dark: var(--color-gray-800);
            --text-medium: var(--color-gray-500);
            --text-light: #868686;
            --bg-white: #FFFFFF;
            --bg-light: var(--color-gray-100);
            --bg-lighter: var(--color-gray-50);
            --border-light: var(--color-gray-200);
            --border-medium: var(--color-gray-300);
            --shadow-soft: var(--shadow-sm);
            --shadow-medium: var(--shadow-md);
            --radius-small: var(--radius-sm);
            --radius-medium: var(--radius-md);
            --radius-large: var(--radius-lg);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: var(--bg-light);
            color: var(--text-dark);
            line-height: 1.5;
        }

        /* ============================================================================
           MODE INDICATORS - p.112: "Make mode its own screen when possible"
           ============================================================================ */

        /* Edit Mode Backdrop - p.112 */
        .edit-mode-backdrop {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 200;
            animation: fadeIn 0.3s ease-out;
        }

        .edit-mode-backdrop.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Edit Mode Header Bar - p.112: Clear mode indication */
        .edit-mode-header {
            display: none;
            background: var(--color-primary-light);
            color: white;
            padding: 12px 24px;
            font-weight: 600;
            justify-content: space-between;
            align-items: center;
            border-radius: var(--radius-md) var(--radius-md) 0 0;
            margin: -24px -24px 24px -24px;
        }

        .edit-mode-header.active {
            display: flex;
        }

        .edit-mode-label {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .edit-mode-actions {
            display: flex;
            gap: 12px;
        }

        /* Listing Card in Edit Mode - p.112-113: Transition as cue */
        .listing-card.editing {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(1.02);
            width: 90%;
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
            z-index: 201;
            border: 3px solid var(--color-primary-light);
            animation: editModeEnter 0.3s ease-out;
        }

        @keyframes editModeEnter {
            from {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1.02);
            }
        }

        /* Mode Indicator Badge - Always visible when editing */
        .mode-indicator {
            position: fixed;
            top: 70px;
            right: 24px;
            background: var(--color-primary-light);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            z-index: 300;
            display: none;
            align-items: center;
            gap: 8px;
            box-shadow: var(--shadow-md);
        }

        .mode-indicator.active {
            display: flex;
        }

        .mode-indicator-dot {
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
            animation: pulse 1.5s infinite;
        }

        /* ============================================================================
           PROGRESSIVE DISCLOSURE - p.119: "Progressive disclosure over long periods"
           ============================================================================ */

        /* Collapsible Sections */
        .collapsible-section {
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        .collapsible-section.collapsed {
            max-height: 0;
        }

        .expand-toggle {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            color: var(--color-primary);
            font-size: 13px;
            font-weight: 500;
            padding: 8px 0;
            user-select: none;
        }

        .expand-toggle:hover {
            color: var(--color-primary-dark);
        }

        .expand-toggle .chevron {
            transition: transform 0.3s ease;
        }

        .expand-toggle.expanded .chevron {
            transform: rotate(180deg);
        }

        /* Show More Link */
        .show-more-link {
            color: var(--color-primary);
            font-size: 13px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }

        .show-more-link:hover {
            text-decoration: underline;
        }

        /* ============================================================================
           FIRST-TIME USER HINTS - p.119: Long Loop for new users
           ============================================================================ */

        /* Hint Tooltip System */
        .hint-container {
            position: relative;
        }

        .hint-indicator {
            position: absolute;
            top: -4px;
            right: -4px;
            width: 12px;
            height: 12px;
            background: var(--accent-blue);
            border-radius: 50%;
            animation: hintPulse 2s infinite;
            cursor: pointer;
            z-index: 10;
        }

        @keyframes hintPulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(54, 197, 240, 0.4);
            }
            50% {
                transform: scale(1.1);
                box-shadow: 0 0 0 8px rgba(54, 197, 240, 0);
            }
        }

        .hint-tooltip {
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--color-gray-800);
            color: white;
            padding: 12px 16px;
            border-radius: var(--radius-md);
            font-size: 13px;
            width: 250px;
            z-index: 100;
            margin-top: 8px;
            box-shadow: var(--shadow-lg);
            display: none;
        }

        .hint-tooltip.visible {
            display: block;
            animation: tooltipFadeIn 0.2s ease-out;
        }

        @keyframes tooltipFadeIn {
            from { opacity: 0; transform: translateX(-50%) translateY(-8px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }

        .hint-tooltip::before {
            content: '';
            position: absolute;
            top: -6px;
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-bottom-color: var(--color-gray-800);
        }

        .hint-tooltip-content {
            margin-bottom: 12px;
            line-height: 1.5;
        }

        .hint-dismiss {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 6px 12px;
            border-radius: var(--radius-sm);
            font-size: 12px;
            cursor: pointer;
            width: 100%;
        }

        .hint-dismiss:hover {
            background: rgba(255,255,255,0.3);
        }

        /* First-time Welcome Banner - Long Loop p.117 */
        .welcome-banner {
            background: linear-gradient(135deg, #E8F4FD 0%, #F0E6F0 100%);
            border-radius: var(--radius-md);
            padding: 20px 24px;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 16px;
            box-shadow: var(--shadow-sm);
        }

        .welcome-banner.hidden {
            display: none;
        }

        .welcome-banner-icon {
            font-size: 32px;
        }

        .welcome-banner-content {
            flex: 1;
        }

        .welcome-banner-content h3 {
            font-size: 16px;
            font-weight: 600;
            color: var(--color-gray-800);
            margin-bottom: 4px;
        }

        .welcome-banner-content p {
            font-size: 13px;
            color: var(--color-gray-500);
        }

        .welcome-banner-progress {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            color: var(--color-gray-500);
            margin-top: 8px;
        }

        .progress-steps {
            display: flex;
            gap: 4px;
        }

        .progress-step {
            width: 24px;
            height: 4px;
            background: var(--color-gray-300);
            border-radius: 2px;
        }

        .progress-step.completed {
            background: var(--color-success);
        }

        .welcome-banner-dismiss {
            background: none;
            border: none;
            color: var(--color-gray-500);
            cursor: pointer;
            font-size: 20px;
            padding: 4px;
        }

        /* ============================================================================
           ONE-OFF MODE - p.113-114: "Mode lasts for duration of single action"
           ============================================================================ */

        /* Inline Confirmation Panel */
        .confirmation-panel {
            display: none;
            background: #FFFBEB;
            border: 1px solid var(--color-warning);
            border-radius: var(--radius-md);
            padding: 16px;
            margin-top: 12px;
            animation: confirmSlideIn 0.2s ease-out;
        }

        .confirmation-panel.active {
            display: block;
        }

        @keyframes confirmSlideIn {
            from { opacity: 0; transform: translateY(-8px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .confirmation-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
            font-weight: 600;
            color: var(--color-gray-800);
        }

        .confirmation-message {
            font-size: 13px;
            color: var(--color-gray-500);
            margin-bottom: 12px;
        }

        .confirmation-actions {
            display: flex;
            gap: 8px;
        }

        .confirmation-timer {
            font-size: 11px;
            color: var(--color-warning);
            margin-top: 8px;
        }

        /* Undo Toast - One-off mode feedback */
        .undo-toast {
            position: fixed;
            bottom: 24px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--color-gray-800);
            color: white;
            padding: 12px 20px;
            border-radius: var(--radius-md);
            display: none;
            align-items: center;
            gap: 12px;
            box-shadow: var(--shadow-lg);
            z-index: 400;
        }

        .undo-toast.visible {
            display: flex;
            animation: toastSlideUp 0.3s ease-out;
        }

        @keyframes toastSlideUp {
            from { opacity: 0; transform: translateX(-50%) translateY(20px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }

        .undo-toast-text {
            font-size: 14px;
        }

        .undo-toast-action {
            background: var(--color-primary-light);
            border: none;
            color: white;
            padding: 6px 12px;
            border-radius: var(--radius-sm);
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
        }

        .undo-toast-timer {
            font-size: 11px;
            color: var(--color-gray-300);
        }

        /* ============================================================================
           SPRING-LOADED MODE - p.113: "Active while physical action occurring"
           ============================================================================ */

        /* Proposal Hover Preview */
        .proposal-item {
            position: relative;
        }

        .proposal-preview {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid var(--color-gray-200);
            border-radius: var(--radius-md);
            padding: 16px;
            margin-top: 4px;
            box-shadow: var(--shadow-lg);
            z-index: 50;
            display: none;
        }

        .proposal-item:hover .proposal-preview {
            display: block;
            animation: previewFadeIn 0.2s ease-out;
        }

        @keyframes previewFadeIn {
            from { opacity: 0; transform: translateY(-4px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .preview-section {
            margin-bottom: 12px;
        }

        .preview-section:last-child {
            margin-bottom: 0;
        }

        .preview-label {
            font-size: 11px;
            font-weight: 600;
            color: var(--color-gray-500);
            text-transform: uppercase;
            margin-bottom: 4px;
        }

        .preview-content {
            font-size: 13px;
            color: var(--color-gray-700);
            line-height: 1.5;
        }

        .preview-badges {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
        }

        .preview-badge {
            background: var(--color-gray-100);
            color: var(--color-gray-600);
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 11px;
        }

        .preview-badge.verified {
            background: #E8F5E9;
            color: #2E7D32;
        }

        /* ============================================================================
           BEHAVIORAL LOOP - p.116: "Prompt with help if paused too long"
           ============================================================================ */

        .help-prompt {
            display: none;
            background: linear-gradient(135deg, #E3F2FD 0%, #E8F5E9 100%);
            border-radius: var(--radius-md);
            padding: 16px;
            margin-top: 12px;
            animation: helpSlideIn 0.3s ease-out;
        }

        .help-prompt.visible {
            display: block;
        }

        @keyframes helpSlideIn {
            from { opacity: 0; transform: translateY(-8px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .help-prompt-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }

        .help-prompt-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--color-gray-800);
        }

        .help-prompt-content {
            font-size: 13px;
            color: var(--color-gray-500);
            margin-bottom: 12px;
        }

        .help-prompt-actions {
            display: flex;
            gap: 8px;
        }

        .help-prompt-link {
            color: var(--color-primary);
            font-size: 13px;
            text-decoration: none;
        }

        .help-prompt-link:hover {
            text-decoration: underline;
        }

        .help-prompt-dismiss {
            color: var(--color-gray-500);
            font-size: 13px;
            cursor: pointer;
            background: none;
            border: none;
        }

        /* ============================================================================
           EXPERT MODE - p.119-120: "Progressive reduction"
           ============================================================================ */

        .expert-mode-toggle {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: var(--color-gray-50);
            border-radius: var(--radius-sm);
            font-size: 12px;
            color: var(--color-gray-500);
            cursor: pointer;
        }

        .expert-mode-toggle:hover {
            background: var(--color-gray-100);
        }

        .toggle-switch {
            width: 32px;
            height: 18px;
            background: var(--color-gray-300);
            border-radius: 9px;
            position: relative;
            transition: background 0.2s;
        }

        .toggle-switch.active {
            background: var(--color-success);
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 14px;
            height: 14px;
            background: white;
            border-radius: 50%;
            transition: transform 0.2s;
        }

        .toggle-switch.active::after {
            transform: translateX(14px);
        }

        /* Expert Mode Styling */
        body.expert-mode .welcome-banner,
        body.expert-mode .first-time-hint,
        body.expert-mode .help-prompt {
            display: none !important;
        }

        body.expert-mode .comparison-card {
            padding: 12px 16px;
        }

        body.expert-mode .comparison-metrics {
            gap: 8px;
        }

        body.expert-mode .metric-label {
            display: none;
        }

        body.expert-mode .success-stories {
            display: none;
        }

        /* ============================================================================
           RETURN USER HANDLING - p.119-120: "Re-robustification"
           ============================================================================ */

        .return-user-banner {
            background: linear-gradient(135deg, #FFF9C4 0%, #FFECB3 100%);
            border-radius: var(--radius-md);
            padding: 16px 24px;
            margin-bottom: 24px;
            display: none;
            align-items: center;
            gap: 16px;
            box-shadow: var(--shadow-sm);
        }

        .return-user-banner.visible {
            display: flex;
        }

        .return-user-icon {
            font-size: 24px;
        }

        .return-user-content {
            flex: 1;
        }

        .return-user-content h3 {
            font-size: 15px;
            font-weight: 600;
            color: var(--color-gray-800);
            margin-bottom: 4px;
        }

        .return-user-content p {
            font-size: 13px;
            color: var(--color-gray-500);
        }

        .return-user-actions {
            display: flex;
            gap: 8px;
        }

        /* ============================================================================
           SESSION MEMORY UI - p.119: "Memory of previous use"
           ============================================================================ */

        .session-memory-indicator {
            font-size: 11px;
            color: var(--color-gray-400);
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .session-memory-indicator::before {
            content: '';
            width: 6px;
            height: 6px;
            background: var(--color-success);
            border-radius: 50%;
        }

        /* ============================================================================
           HEADER
           ============================================================================ */

        .header {
            background: var(--color-primary);
            padding: 12px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            color: white;
            font-weight: 600;
            font-size: 18px;
        }

        .logo-icon {
            width: 36px;
            height: 36px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--color-primary);
            font-weight: bold;
        }

        .nav-links {
            display: flex;
            align-items: center;
            gap: 24px;
        }

        .nav-link {
            color: rgba(255,255,255,0.9);
            text-decoration: none;
            font-size: 14px;
        }

        .nav-link.active {
            background: rgba(255,255,255,0.15);
            padding: 8px 16px;
            border-radius: 20px;
            color: white;
        }

        .user-section {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .notification-icon {
            color: white;
            position: relative;
            cursor: pointer;
        }

        .notification-badge {
            position: absolute;
            top: -6px;
            right: -6px;
            background: var(--color-danger);
            color: white;
            font-size: 10px;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
        }

        /* ============================================================================
           MAIN CONTAINER
           ============================================================================ */

        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 24px;
        }

        /* Welcome Section */
        .welcome-section {
            background: white;
            border-radius: var(--radius-md);
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: var(--shadow-sm);
        }

        .welcome-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .welcome-text h1 {
            font-size: 32px;
            font-weight: 700;
            color: var(--color-gray-800);
            margin-bottom: 4px;
        }

        .welcome-text p {
            color: var(--color-gray-500);
            font-size: 14px;
        }

        .action-buttons {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        /* Button System */
        .btn {
            padding: 10px 20px;
            border-radius: var(--radius-md);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            border: none;
        }

        .btn-primary {
            background: var(--color-primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--color-primary-dark);
        }

        .btn-secondary {
            background: white;
            color: var(--color-primary);
            border: 1px solid var(--color-primary);
        }

        .btn-secondary:hover {
            background: var(--color-gray-50);
        }

        .btn-success {
            background: var(--color-success);
            color: white;
        }

        .btn-success:hover {
            background: #4A4AB8;
        }

        .btn-danger {
            background: white;
            color: var(--color-danger);
            border: 1px solid var(--color-danger);
        }

        .btn-danger:hover {
            background: #FEF2F2;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 12px;
            border-radius: var(--radius-sm);
        }

        .btn-accept {
            background: var(--color-success);
            color: white;
            border: none;
        }

        .btn-view {
            background: white;
            color: var(--color-primary);
            border: 1px solid var(--color-gray-300);
        }

        /* Platform Stats */
        .platform-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            padding-top: 20px;
            border-top: 1px solid var(--border-light);
        }

        .stat-item {
            text-align: center;
            padding: 12px;
            background: var(--color-gray-50);
            border-radius: var(--radius-md);
        }

        .stat-number {
            font-size: 24px;
            font-weight: 700;
            color: var(--color-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .stat-label {
            font-size: 12px;
            color: var(--color-gray-500);
            margin-top: 4px;
        }

        .live-indicator {
            width: 8px;
            height: 8px;
            background: var(--color-success);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Comparison Card */
        .comparison-card {
            background: linear-gradient(135deg, #F0E6F0 0%, #E8F4EA 100%);
            border-radius: var(--radius-md);
            padding: 20px 24px;
            margin-bottom: 24px;
            box-shadow: var(--shadow-sm);
        }

        .comparison-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .comparison-icon {
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            box-shadow: var(--shadow-sm);
        }

        .comparison-title {
            flex: 1;
        }

        .comparison-title h3 {
            font-size: 18px;
            font-weight: 600;
            color: var(--color-gray-800);
        }

        .comparison-title p {
            font-size: 12px;
            color: var(--color-gray-500);
        }

        .peer-badge {
            background: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            color: var(--color-gray-500);
        }

        .comparison-metrics {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
        }

        .metric-item {
            background: white;
            padding: 16px;
            border-radius: var(--radius-md);
            text-align: center;
            box-shadow: var(--shadow-sm);
        }

        .metric-value {
            font-size: 20px;
            font-weight: 700;
            color: var(--color-gray-800);
        }

        .metric-label {
            font-size: 12px;
            color: var(--color-gray-500);
            margin-top: 4px;
        }

        .metric-comparison {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            margin-top: 8px;
            font-size: 12px;
        }

        .metric-comparison.positive {
            color: var(--color-success);
        }

        .metric-comparison.neutral {
            color: var(--text-light);
        }

        /* Success Stories */
        .success-stories {
            background: white;
            border-radius: var(--radius-md);
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: var(--shadow-sm);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 24px;
            font-weight: 600;
            color: var(--color-gray-800);
        }

        .see-all-link {
            color: var(--color-primary);
            font-size: 14px;
            text-decoration: none;
        }

        .stories-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
        }

        .story-card {
            background: var(--color-gray-50);
            border-radius: var(--radius-md);
            padding: 16px;
            box-shadow: var(--shadow-sm);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .story-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .story-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .story-avatar {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: var(--color-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        .story-info h4 {
            font-size: 14px;
            font-weight: 600;
            color: var(--color-gray-800);
        }

        .story-info p {
            font-size: 12px;
            color: var(--color-gray-500);
        }

        .story-badge {
            background: var(--color-success);
            color: white;
            padding: 2px 8px;
            border-radius: var(--radius-sm);
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .story-quote {
            font-size: 13px;
            color: var(--color-gray-500);
            font-style: italic;
            line-height: 1.6;
            margin-bottom: 12px;
        }

        .story-stat {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            font-weight: 600;
            color: var(--color-success);
        }

        /* Hidden stories for progressive disclosure */
        .story-card.hidden {
            display: none;
        }

        /* Activity Feed */
        .activity-feed {
            background: white;
            border-radius: var(--radius-md);
            padding: 20px 24px;
            margin-bottom: 24px;
            box-shadow: var(--shadow-sm);
        }

        .activity-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 16px;
        }

        .activity-header h3 {
            font-size: 14px;
            font-weight: 600;
            color: var(--color-gray-500);
        }

        .activity-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .activity-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 12px;
            background: var(--color-gray-50);
            border-radius: var(--radius-sm);
            font-size: 13px;
        }

        .activity-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        .activity-icon.proposal { background: #E8F4FD; color: var(--accent-blue); }
        .activity-icon.lease { background: #E8F5E9; color: var(--color-success); }
        .activity-icon.listing { background: #FFF3E0; color: var(--color-warning); }

        .activity-text {
            flex: 1;
            color: var(--color-gray-500);
        }

        .activity-text strong {
            color: var(--color-gray-800);
        }

        .activity-time {
            font-size: 11px;
            color: var(--text-light);
        }

        /* Listings Section */
        .listings-section {
            background: white;
            border-radius: var(--radius-md);
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: var(--shadow-sm);
        }

        .listing-card {
            box-shadow: var(--shadow-sm);
            border-radius: var(--radius-md);
            padding: 20px;
            margin-bottom: 16px;
            background: white;
            transition: box-shadow 0.2s, transform 0.3s;
        }

        .listing-card:hover {
            box-shadow: var(--shadow-md);
        }

        .listing-card:last-child {
            margin-bottom: 0;
        }

        .listing-header {
            display: flex;
            gap: 16px;
            margin-bottom: 16px;
        }

        .listing-image {
            width: 120px;
            height: 90px;
            background: linear-gradient(135deg, var(--color-gray-100) 0%, var(--color-gray-200) 100%);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-light);
            font-size: 24px;
        }

        .listing-info {
            flex: 1;
        }

        .listing-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--color-gray-800);
            margin-bottom: 4px;
        }

        .listing-location {
            font-size: 13px;
            color: var(--color-gray-500);
            display: flex;
            align-items: center;
            gap: 4px;
            margin-bottom: 8px;
        }

        .listing-stats {
            display: flex;
            gap: 16px;
        }

        .listing-stat {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            color: var(--color-gray-500);
        }

        .listing-stat-icon { font-size: 14px; }
        .listing-stat-value { font-weight: 600; color: var(--color-gray-800); }
        .listing-stat-comparison { color: var(--color-success); font-size: 11px; }

        /* Proposals Section */
        .proposals-section {
            background: var(--color-gray-50);
            border-radius: var(--radius-md);
            padding: 16px;
            margin-top: 16px;
        }

        .proposals-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .proposals-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--color-gray-800);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .proposals-count {
            background: var(--color-primary);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
        }

        .proposals-benchmark {
            font-size: 12px;
            color: var(--color-success);
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .proposal-item {
            background: white;
            border-radius: var(--radius-sm);
            padding: 12px 16px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
            border-left: 3px solid transparent;
            box-shadow: var(--shadow-sm);
            position: relative;
        }

        .proposal-item.urgent {
            border-left-color: var(--color-danger);
            background: #FFF5F5;
        }

        .proposal-item.new {
            border-left-color: var(--color-success);
        }

        .proposal-avatar {
            width: 36px;
            height: 36px;
            background: var(--accent-blue);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 14px;
        }

        .proposal-details { flex: 1; }

        .proposal-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--color-gray-800);
            margin-bottom: 2px;
        }

        .proposal-dates {
            font-size: 12px;
            color: var(--color-gray-500);
        }

        .proposal-urgency { text-align: right; }

        .urgency-timer {
            font-size: 12px;
            color: var(--color-danger);
            font-weight: 600;
            margin-bottom: 2px;
        }

        .urgency-hint {
            font-size: 11px;
            color: var(--text-light);
        }

        .proposal-actions {
            display: flex;
            gap: 8px;
        }

        .response-benchmark {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: #F0F4FF;
            border-radius: var(--radius-sm);
            font-size: 12px;
            color: var(--color-gray-500);
        }

        .response-benchmark strong {
            color: var(--color-primary);
        }

        /* Pricing Context */
        .pricing-context {
            background: var(--color-gray-50);
            border-radius: var(--radius-sm);
            padding: 12px;
            margin-top: 12px;
        }

        .pricing-header {
            font-size: 12px;
            color: var(--color-gray-500);
            margin-bottom: 8px;
        }

        .pricing-range {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .pricing-bar {
            flex: 1;
            height: 8px;
            background: linear-gradient(to right, #E8F5E9, #FFF9C4, #FFECB3);
            border-radius: var(--radius-sm);
            position: relative;
        }

        .pricing-marker {
            position: absolute;
            top: -4px;
            width: 16px;
            height: 16px;
            background: var(--color-primary);
            border: 2px solid white;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .pricing-labels {
            display: flex;
            justify-content: space-between;
            font-size: 10px;
            color: var(--text-light);
            margin-top: 4px;
        }

        .listing-actions {
            display: flex;
            gap: 8px;
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid var(--color-gray-200);
        }

        /* Cohort Badge */
        .cohort-badge {
            background: linear-gradient(135deg, #E8F5E9 0%, #E3F2FD 100%);
            box-shadow: var(--shadow-sm);
            border-radius: var(--radius-md);
            padding: 16px 20px;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .cohort-icon {
            width: 48px;
            height: 48px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .cohort-info h3 {
            font-size: 14px;
            font-weight: 600;
            color: var(--color-gray-800);
            margin-bottom: 4px;
        }

        .cohort-info p {
            font-size: 12px;
            color: var(--color-gray-500);
        }

        .cohort-progress {
            margin-left: auto;
            text-align: right;
        }

        .cohort-progress-label {
            font-size: 11px;
            color: var(--color-gray-500);
            margin-bottom: 4px;
        }

        .progress-bar {
            width: 120px;
            height: 6px;
            background: rgba(0,0,0,0.1);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--color-success);
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        /* Footer */
        .footer {
            background: white;
            border-top: 1px solid var(--color-gray-200);
            padding: 40px 24px;
            margin-top: 40px;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 40px;
        }

        .footer-column h4 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--color-gray-700);
        }

        .footer-column ul { list-style: none; }
        .footer-column li { margin-bottom: 8px; }
        .footer-column a {
            color: var(--color-gray-500);
            text-decoration: none;
            font-size: 13px;
        }
        .footer-column a:hover { color: var(--color-primary); }

        /* Responsive */
        @media (max-width: 768px) {
            .platform-stats { grid-template-columns: repeat(2, 1fr); }
            .comparison-metrics { grid-template-columns: 1fr; }
            .stories-grid { grid-template-columns: 1fr; }
            .listing-header { flex-direction: column; }
            .listing-image { width: 100%; height: 150px; }
            .footer-content { grid-template-columns: repeat(2, 1fr); }
        }
    </style>
</head>
<body>

    <!-- Edit Mode Backdrop - p.112: Mode separation -->
    <div class="edit-mode-backdrop" id="editBackdrop"></div>

    <!-- Mode Indicator - p.112: Always visible when in mode -->
    <div class="mode-indicator" id="modeIndicator">
        <span class="mode-indicator-dot"></span>
        <span id="modeIndicatorText">Editing Mode</span>
    </div>

    <!-- Undo Toast - One-Off Mode p.113-114 -->
    <div class="undo-toast" id="undoToast">
        <span class="undo-toast-text" id="undoToastText">Proposal accepted</span>
        <button class="undo-toast-action" onclick="undoAction()">Undo</button>
        <span class="undo-toast-timer" id="undoTimer">5s</span>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="logo">
            <div class="logo-icon">SL</div>
            Split Lease
        </div>
        <nav class="nav-links">
            <a href="#" class="nav-link">Host with Us</a>
            <a href="#" class="nav-link active">Host Overview</a>
        </nav>
        <div class="user-section">
            <!-- Expert Mode Toggle - Progressive Reduction p.119-120 -->
            <div class="expert-mode-toggle" onclick="toggleExpertMode()">
                <span>Expert Mode</span>
                <div class="toggle-switch" id="expertToggle"></div>
            </div>
            <div class="notification-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 17H2a3 3 0 0 0 3-3V9a7 7 0 0 1 14 0v5a3 3 0 0 0 3 3zm-8.27 4a2 2 0 0 1-3.46 0"></path>
                </svg>
                <span class="notification-badge">3</span>
            </div>
            <div class="user-avatar">R</div>
        </div>
    </header>

    <main class="main-container">

        <!--
        ============================================================================
        RETURN USER BANNER - Re-Robustification p.119-120
        "If the user doesn't engage with the product for a while, the microinteraction
        might have to become more robust and obvious again."
        ============================================================================
        -->
        <div class="return-user-banner" id="returnUserBanner">
            <span class="return-user-icon">&#128075;</span>
            <div class="return-user-content">
                <h3>Welcome back, Rod! It's been a while.</h3>
                <p>You have 3 new proposals since your last visit. Here's what's changed...</p>
            </div>
            <div class="return-user-actions">
                <button class="btn btn-primary btn-small" onclick="showChangelog()">See What's New</button>
                <button class="btn btn-secondary btn-small" onclick="dismissReturnBanner()">I Remember</button>
            </div>
        </div>

        <!--
        ============================================================================
        FIRST-TIME WELCOME BANNER - Long Loop p.117
        "What can be done to make the microinteraction better the second time it's
        used? The tenth? The ten thousandth?"
        ============================================================================
        -->
        <div class="welcome-banner" id="welcomeBanner">
            <span class="welcome-banner-icon">&#127881;</span>
            <div class="welcome-banner-content">
                <h3>Welcome to your Host Dashboard!</h3>
                <p>Let's get you set up for success. Complete these steps to start receiving proposals.</p>
                <div class="welcome-banner-progress">
                    <span>Setup progress:</span>
                    <div class="progress-steps">
                        <div class="progress-step completed"></div>
                        <div class="progress-step completed"></div>
                        <div class="progress-step completed"></div>
                        <div class="progress-step"></div>
                        <div class="progress-step"></div>
                    </div>
                    <span>3 of 5 complete</span>
                </div>
            </div>
            <button class="welcome-banner-dismiss" onclick="dismissWelcomeBanner()">&times;</button>
        </div>

        <!-- Cohort Badge (from Run 011) -->
        <div class="cohort-badge">
            <div class="cohort-icon">&#127881;</div>
            <div class="cohort-info">
                <h3>You joined with 234 new hosts in February!</h3>
                <p>Complete your setup to join our "Class of Feb 2026" community group</p>
            </div>
            <div class="cohort-progress">
                <div class="cohort-progress-label">Profile completion</div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 75%"></div>
                </div>
            </div>
        </div>

        <!-- Welcome Section -->
        <section class="welcome-section">
            <div class="welcome-header">
                <div class="welcome-text">
                    <h1>Welcome back, Rod</h1>
                    <p>You have 5 proposals waiting for your review</p>
                    <!-- Session Memory Indicator - Long Loop p.119 -->
                    <div class="session-memory-indicator">
                        Preferences restored from last session
                    </div>
                </div>
                <div class="action-buttons">
                    <!--
                    ============================================================================
                    HINT CONTAINER - Progressive Disclosure p.119
                    First-time users see pulsing indicator with tooltip
                    ============================================================================
                    -->
                    <div class="hint-container">
                        <a href="#" class="btn btn-primary">+ Create New Listing</a>
                        <div class="hint-indicator first-time-hint" onclick="showHint('createListing')"></div>
                        <div class="hint-tooltip" id="hint-createListing">
                            <div class="hint-tooltip-content">
                                <strong>Start here!</strong><br>
                                Create your first listing to begin receiving proposals from verified renters.
                            </div>
                            <button class="hint-dismiss" onclick="dismissHint('createListing')">Got it</button>
                        </div>
                    </div>
                    <a href="#" class="btn btn-secondary">Import Listing</a>
                </div>
            </div>

            <div class="platform-stats">
                <div class="stat-item">
                    <div class="stat-number">
                        <span class="live-indicator"></span>
                        12,847
                    </div>
                    <div class="stat-label">Active Hosts</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">23,456</div>
                    <div class="stat-label">Successful Leases</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">$4.2M</div>
                    <div class="stat-label">Earned by Hosts (Feb)</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">94%</div>
                    <div class="stat-label">Host Satisfaction</div>
                </div>
            </div>
        </section>

        <!--
        ============================================================================
        COMPARISON CARD with Progressive Disclosure - p.119
        Default collapsed for new users, expanded for returning users
        ============================================================================
        -->
        <section class="comparison-card">
            <div class="comparison-header">
                <div class="comparison-icon">&#128202;</div>
                <div class="comparison-title hint-container">
                    <h3>How You Compare to Hosts Like You</h3>
                    <p>Based on 234 hosts with similar listings in Manhattan</p>
                    <!-- First-time hint -->
                    <div class="hint-indicator first-time-hint" onclick="showHint('comparison')"></div>
                    <div class="hint-tooltip" id="hint-comparison">
                        <div class="hint-tooltip-content">
                            <strong>Peer Benchmarks</strong><br>
                            See how you stack up against hosts with similar listings. Use this to optimize your pricing and response time.
                        </div>
                        <button class="hint-dismiss" onclick="dismissHint('comparison')">Got it</button>
                    </div>
                </div>
                <span class="peer-badge">Private rooms | Manhattan | New hosts</span>
                <!-- Expand/Collapse Toggle - Progressive Disclosure p.119 -->
                <div class="expand-toggle" onclick="toggleSection('comparisonMetrics')">
                    <span class="chevron">&#9660;</span>
                    <span id="comparisonToggleText">Hide details</span>
                </div>
            </div>
            <div class="collapsible-section" id="comparisonMetrics">
                <div class="comparison-metrics">
                    <div class="metric-item">
                        <div class="metric-value">5</div>
                        <div class="metric-label">Your Proposals</div>
                        <div class="metric-comparison positive">
                            &#8593; Above average (avg: 3.2)
                        </div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value">6h</div>
                        <div class="metric-label">Your Avg Response</div>
                        <div class="metric-comparison positive">
                            &#10003; Faster than 78% of peers
                        </div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value">Top 30%</div>
                        <div class="metric-label">Your Ranking</div>
                        <div class="metric-comparison neutral">
                            Among similar hosts
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Activity Feed -->
        <section class="activity-feed">
            <div class="activity-header">
                <span class="live-indicator"></span>
                <h3>Happening Now on Split Lease</h3>
                <!-- Closed Loop Indicator - p.115 -->
                <span style="margin-left: auto; font-size: 11px; color: var(--color-gray-400);">
                    Last updated: 30s ago | <span style="cursor: pointer; color: var(--color-primary);">Refresh</span>
                </span>
            </div>
            <div class="activity-list">
                <div class="activity-item">
                    <div class="activity-icon lease">&#10003;</div>
                    <div class="activity-text"><strong>Sarah M.</strong> in Brooklyn just signed a 6-month lease</div>
                    <div class="activity-time">Just now</div>
                </div>
                <div class="activity-item">
                    <div class="activity-icon proposal">&#8594;</div>
                    <div class="activity-text"><strong>3 new proposals</strong> sent to Manhattan listings</div>
                    <div class="activity-time">2 min ago</div>
                </div>
                <div class="activity-item">
                    <div class="activity-icon listing">+</div>
                    <div class="activity-text"><strong>New listing</strong> published in your neighborhood</div>
                    <div class="activity-time">5 min ago</div>
                </div>
            </div>
        </section>

        <!--
        ============================================================================
        SUCCESS STORIES with Progressive Disclosure - p.119
        Show 1 story by default, "Show more" reveals the rest
        ============================================================================
        -->
        <section class="success-stories">
            <div class="section-header">
                <h2 class="section-title">Success Stories from Hosts Like You</h2>
                <a href="#" class="see-all-link">See all stories &#8594;</a>
            </div>
            <div class="stories-grid">
                <div class="story-card">
                    <div class="story-header">
                        <div class="story-avatar">M</div>
                        <div class="story-info">
                            <h4>Maria K.</h4>
                            <p>Private Room - Manhattan</p>
                        </div>
                        <span class="story-badge">Top Host</span>
                    </div>
                    <p class="story-quote">"I was nervous about my first listing, but within a week I had 3 solid proposals. The key was responding quickly!"</p>
                    <div class="story-stat">
                        &#128176; $2,400 earned in first month
                    </div>
                </div>
                <!-- Hidden stories - Progressive Disclosure p.119 -->
                <div class="story-card hidden" id="story2">
                    <div class="story-header">
                        <div class="story-avatar">J</div>
                        <div class="story-info">
                            <h4>James T.</h4>
                            <p>Private Room - Upper East Side</p>
                        </div>
                    </div>
                    <p class="story-quote">"Started with one room, now I manage 3 listings. Split Lease made it easy to scale."</p>
                    <div class="story-stat">
                        &#128200; 3x growth in 6 months
                    </div>
                </div>
                <div class="story-card hidden" id="story3">
                    <div class="story-header">
                        <div class="story-avatar">L</div>
                        <div class="story-info">
                            <h4>Lisa R.</h4>
                            <p>Entire Apt - Chelsea</p>
                        </div>
                        <span class="story-badge">New Host</span>
                    </div>
                    <p class="story-quote">"Joined last month and already have a tenant lined up. The comparison tools helped me price competitively."</p>
                    <div class="story-stat">
                        &#9889; First lease in 2 weeks
                    </div>
                </div>
            </div>
            <!-- Show More - Progressive Disclosure p.119 -->
            <div style="text-align: center; margin-top: 16px;">
                <span class="show-more-link" id="showMoreStories" onclick="showMoreStories()">
                    Show 2 more stories &#9660;
                </span>
            </div>
        </section>

        <!-- Listings Section -->
        <section class="listings-section">
            <div class="section-header">
                <h2 class="section-title">Your Listings</h2>
            </div>

            <!--
            ============================================================================
            LISTING CARD with Edit Mode - p.112
            "If you must have a mode, make it its own screen when possible"
            ============================================================================
            -->
            <div class="listing-card" id="listing1">
                <!--
                ============================================================================
                EDIT MODE HEADER - p.112: Clear mode indication
                Only visible when in edit mode
                ============================================================================
                -->
                <div class="edit-mode-header" id="editHeader1">
                    <div class="edit-mode-label">
                        <span>&#9998;</span>
                        <span>Editing: Stylish Private Room in Vibrant Neighborhood</span>
                    </div>
                    <div class="edit-mode-actions">
                        <button class="btn btn-secondary btn-small" onclick="exitEditMode('listing1')">Cancel</button>
                        <button class="btn btn-success btn-small" onclick="saveAndExit('listing1')">Save Changes</button>
                    </div>
                </div>

                <div class="listing-header">
                    <div class="listing-image">&#127968;</div>
                    <div class="listing-info">
                        <h3 class="listing-title">Stylish Private Room in Vibrant Neighborhood</h3>
                        <div class="listing-location">
                            &#128205; Manhattan, NY
                        </div>
                        <div class="listing-stats">
                            <div class="listing-stat">
                                <span class="listing-stat-icon">&#128065;</span>
                                <span class="listing-stat-value">156</span> views this week
                                <span class="listing-stat-comparison">+32% vs similar</span>
                            </div>
                            <div class="listing-stat">
                                <span class="listing-stat-icon">&#10084;</span>
                                <span class="listing-stat-value">12</span> saves
                            </div>
                        </div>
                    </div>
                </div>

                <div class="proposals-section">
                    <div class="proposals-header">
                        <div class="proposals-title hint-container">
                            Active Proposals
                            <span class="proposals-count">2</span>
                            <!-- First-time hint -->
                            <div class="hint-indicator first-time-hint" onclick="showHint('proposals')"></div>
                            <div class="hint-tooltip" id="hint-proposals">
                                <div class="hint-tooltip-content">
                                    <strong>Your pending proposals</strong><br>
                                    Review and respond to proposals quickly. Faster responses lead to more successful leases!
                                </div>
                                <button class="hint-dismiss" onclick="dismissHint('proposals')">Got it</button>
                            </div>
                        </div>
                        <div class="proposals-benchmark">
                            &#8593; Above average for private rooms in your area
                        </div>
                    </div>

                    <!--
                    ============================================================================
                    PROPOSAL ITEM with Spring-Loaded Preview - p.113
                    "The value of a spring-loaded mode is that the user seldom forgets
                    that they are in a different mode"
                    ============================================================================
                    -->
                    <div class="proposal-item urgent" id="proposal1">
                        <div class="proposal-avatar">A</div>
                        <div class="proposal-details">
                            <div class="proposal-name">Alex Chen</div>
                            <div class="proposal-dates">Mar 1 - Aug 31, 2026 - $1,800/mo</div>
                        </div>
                        <div class="proposal-urgency">
                            <div class="urgency-timer">&#9200; Waiting 2 days</div>
                            <div class="urgency-hint">Respond soon for best results</div>
                        </div>
                        <div class="proposal-actions">
                            <button class="btn-small btn-view">View</button>
                            <button class="btn-small btn-accept" onclick="initiateAccept('proposal1', 'Alex Chen')">Accept</button>
                        </div>

                        <!--
                        ============================================================================
                        SPRING-LOADED PREVIEW - p.113
                        Appears on hover, disappears on mouse-out
                        ============================================================================
                        -->
                        <div class="proposal-preview">
                            <!-- Spring-Loaded Mode - p.113 -->
                            <div class="preview-section">
                                <div class="preview-label">Renter Message</div>
                                <div class="preview-content">
                                    "Hi! I'm a graduate student at NYU looking for a quiet place to stay while I complete my thesis. I'm very clean and respectful of shared spaces."
                                </div>
                            </div>
                            <div class="preview-section">
                                <div class="preview-label">Verification Status</div>
                                <div class="preview-badges">
                                    <span class="preview-badge verified">&#10003; ID Verified</span>
                                    <span class="preview-badge verified">&#10003; Income Verified</span>
                                    <span class="preview-badge">Student</span>
                                </div>
                            </div>
                        </div>

                        <!--
                        ============================================================================
                        ONE-OFF CONFIRMATION MODE - p.113-114
                        "Mode lasts for the duration of a single action, then turns off"
                        ============================================================================
                        -->
                        <div class="confirmation-panel" id="confirm-proposal1">
                            <!-- One-Off Mode - p.113-114 -->
                            <div class="confirmation-header">
                                &#9888; Confirm Acceptance
                            </div>
                            <div class="confirmation-message">
                                You're about to accept Alex Chen's proposal for $1,800/mo from Mar 1 - Aug 31, 2026.
                                This will send them a notification and begin the lease process.
                            </div>
                            <div class="confirmation-actions">
                                <button class="btn btn-secondary btn-small" onclick="cancelConfirm('proposal1')">Cancel</button>
                                <button class="btn btn-success btn-small" onclick="confirmAccept('proposal1', 'Alex Chen')">Confirm Accept</button>
                            </div>
                            <div class="confirmation-timer" id="timer-proposal1">Auto-cancels in 10s</div>
                        </div>
                    </div>

                    <div class="proposal-item new" id="proposal2">
                        <div class="proposal-avatar">S</div>
                        <div class="proposal-details">
                            <div class="proposal-name">Sophie Williams</div>
                            <div class="proposal-dates">Apr 15 - Oct 15, 2026 - $1,750/mo</div>
                        </div>
                        <div class="proposal-urgency">
                            <div class="urgency-timer" style="color: var(--accent-indigo);">New today</div>
                        </div>
                        <div class="proposal-actions">
                            <button class="btn-small btn-view">View</button>
                            <button class="btn-small btn-accept" onclick="initiateAccept('proposal2', 'Sophie Williams')">Accept</button>
                        </div>

                        <!-- Spring-Loaded Preview - p.113 -->
                        <div class="proposal-preview">
                            <div class="preview-section">
                                <div class="preview-label">Renter Message</div>
                                <div class="preview-content">
                                    "Hello! I'm relocating to NYC for a 6-month work assignment. Looking for a comfortable place in a good neighborhood. Happy to provide references!"
                                </div>
                            </div>
                            <div class="preview-section">
                                <div class="preview-label">Verification Status</div>
                                <div class="preview-badges">
                                    <span class="preview-badge verified">&#10003; ID Verified</span>
                                    <span class="preview-badge verified">&#10003; Employment Verified</span>
                                    <span class="preview-badge">Professional</span>
                                </div>
                            </div>
                        </div>

                        <!-- One-Off Confirmation - p.113-114 -->
                        <div class="confirmation-panel" id="confirm-proposal2">
                            <div class="confirmation-header">
                                &#9888; Confirm Acceptance
                            </div>
                            <div class="confirmation-message">
                                You're about to accept Sophie Williams's proposal for $1,750/mo from Apr 15 - Oct 15, 2026.
                            </div>
                            <div class="confirmation-actions">
                                <button class="btn btn-secondary btn-small" onclick="cancelConfirm('proposal2')">Cancel</button>
                                <button class="btn btn-success btn-small" onclick="confirmAccept('proposal2', 'Sophie Williams')">Confirm Accept</button>
                            </div>
                            <div class="confirmation-timer" id="timer-proposal2">Auto-cancels in 10s</div>
                        </div>
                    </div>

                    <div class="response-benchmark">
                        &#128161; <strong>Top hosts in Manhattan</strong> respond within 4 hours and see 3x higher conversion
                    </div>

                    <!--
                    ============================================================================
                    BEHAVIORAL HELP PROMPT - p.116
                    "If a user has paused at one part of the microinteraction for too long,
                    the microinteraction could prompt them with help"
                    ============================================================================
                    -->
                    <div class="help-prompt" id="helpPrompt">
                        <!-- Behavioral Loop - p.116 -->
                        <div class="help-prompt-header">
                            <span>&#128172;</span>
                            <span class="help-prompt-title">Need help deciding?</span>
                        </div>
                        <div class="help-prompt-content">
                            We noticed you've been reviewing proposals for a while. Here's what top hosts consider when evaluating renters:
                            verification status, lease duration, and communication quality.
                        </div>
                        <div class="help-prompt-actions">
                            <a href="#" class="help-prompt-link">Read the full guide</a>
                            <button class="help-prompt-dismiss" onclick="dismissHelpPrompt()">I'm good, thanks</button>
                        </div>
                    </div>
                </div>

                <!--
                ============================================================================
                PRICING CONTEXT with Progressive Disclosure - p.119
                Hidden by default, expandable on demand
                ============================================================================
                -->
                <div class="expand-toggle" onclick="toggleSection('pricingContext1')" style="padding: 12px 0 0 0;">
                    <span class="chevron">&#9654;</span>
                    <span>Show pricing context</span>
                </div>
                <div class="collapsible-section collapsed" id="pricingContext1">
                    <!-- Progressive Disclosure - p.119 -->
                    <div class="pricing-context">
                        <div class="pricing-header">Your pricing compared to similar private rooms in Manhattan</div>
                        <div class="pricing-range">
                            <span>$1,400</span>
                            <div class="pricing-bar">
                                <div class="pricing-marker" style="left: 55%;" title="Your price: $1,800"></div>
                            </div>
                            <span>$2,200</span>
                        </div>
                        <div class="pricing-labels">
                            <span>Budget</span>
                            <span>Your price: $1,800 (Mid-range)</span>
                            <span>Premium</span>
                        </div>
                    </div>
                </div>

                <div class="listing-actions">
                    <!--
                    ============================================================================
                    EDIT MODE TRIGGER - p.111-112
                    "A mode is a fork in the rules"
                    ============================================================================
                    -->
                    <a href="#" class="btn btn-primary" onclick="enterEditMode('listing1'); return false;">Manage Listing</a>
                    <a href="#" class="btn btn-secondary">Preview</a>
                    <a href="#" class="btn btn-secondary">Leases</a>
                    <a href="#" class="btn btn-secondary">Create House Manual</a>
                </div>
            </div>

            <!-- Listing Card 2 -->
            <div class="listing-card" id="listing2">
                <div class="edit-mode-header" id="editHeader2">
                    <div class="edit-mode-label">
                        <span>&#9998;</span>
                        <span>Editing: 1 Bedroom Entire Place in Manhattan</span>
                    </div>
                    <div class="edit-mode-actions">
                        <button class="btn btn-secondary btn-small" onclick="exitEditMode('listing2')">Cancel</button>
                        <button class="btn btn-success btn-small" onclick="saveAndExit('listing2')">Save Changes</button>
                    </div>
                </div>

                <div class="listing-header">
                    <div class="listing-image">&#127970;</div>
                    <div class="listing-info">
                        <h3 class="listing-title">1 Bedroom Entire Place in Manhattan</h3>
                        <div class="listing-location">
                            &#128205; Manhattan, NY
                        </div>
                        <div class="listing-stats">
                            <div class="listing-stat">
                                <span class="listing-stat-icon">&#128065;</span>
                                <span class="listing-stat-value">89</span> views this week
                            </div>
                            <div class="listing-stat">
                                <span class="listing-stat-icon">&#10084;</span>
                                <span class="listing-stat-value">7</span> saves
                            </div>
                        </div>
                    </div>
                </div>

                <div class="proposals-section">
                    <div class="proposals-header">
                        <div class="proposals-title">
                            Active Proposals
                            <span class="proposals-count">1</span>
                        </div>
                        <div class="proposals-benchmark" style="color: var(--text-medium);">
                            On par with similar entire places
                        </div>
                    </div>

                    <div class="proposal-item new" id="proposal3">
                        <div class="proposal-avatar">M</div>
                        <div class="proposal-details">
                            <div class="proposal-name">Michael Brown</div>
                            <div class="proposal-dates">May 1 - Nov 1, 2026 - $3,200/mo</div>
                        </div>
                        <div class="proposal-urgency">
                            <div class="urgency-timer" style="color: var(--accent-blue);">4 hours ago</div>
                        </div>
                        <div class="proposal-actions">
                            <button class="btn-small btn-view">View</button>
                            <button class="btn-small btn-accept" onclick="initiateAccept('proposal3', 'Michael Brown')">Accept</button>
                        </div>

                        <!-- Spring-Loaded Preview - p.113 -->
                        <div class="proposal-preview">
                            <div class="preview-section">
                                <div class="preview-label">Renter Message</div>
                                <div class="preview-content">
                                    "Hi there! I'm a remote software engineer looking for a place while my apartment is being renovated. I work from home and am very quiet."
                                </div>
                            </div>
                            <div class="preview-section">
                                <div class="preview-label">Verification Status</div>
                                <div class="preview-badges">
                                    <span class="preview-badge verified">&#10003; ID Verified</span>
                                    <span class="preview-badge verified">&#10003; Income Verified</span>
                                    <span class="preview-badge">Remote Worker</span>
                                </div>
                            </div>
                        </div>

                        <!-- One-Off Confirmation - p.113-114 -->
                        <div class="confirmation-panel" id="confirm-proposal3">
                            <div class="confirmation-header">
                                &#9888; Confirm Acceptance
                            </div>
                            <div class="confirmation-message">
                                You're about to accept Michael Brown's proposal for $3,200/mo from May 1 - Nov 1, 2026.
                            </div>
                            <div class="confirmation-actions">
                                <button class="btn btn-secondary btn-small" onclick="cancelConfirm('proposal3')">Cancel</button>
                                <button class="btn btn-success btn-small" onclick="confirmAccept('proposal3', 'Michael Brown')">Confirm Accept</button>
                            </div>
                            <div class="confirmation-timer" id="timer-proposal3">Auto-cancels in 10s</div>
                        </div>
                    </div>

                    <div class="response-benchmark">
                        &#128161; <strong>82% of hosts</strong> accept offers at this price point for entire places
                    </div>
                </div>

                <div class="listing-actions">
                    <a href="#" class="btn btn-primary" onclick="enterEditMode('listing2'); return false;">Manage Listing</a>
                    <a href="#" class="btn btn-secondary">Preview</a>
                    <a href="#" class="btn btn-secondary">Leases</a>
                    <a href="#" class="btn btn-secondary">Create House Manual</a>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-column">
                <h4>Company</h4>
                <ul>
                    <li><a href="#">About Periodic Tenancy</a></li>
                    <li><a href="#">About the Team</a></li>
                    <li><a href="#">Careers at Split Lease</a></li>
                    <li><a href="#">Blog</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h4>For Hosts</h4>
                <ul>
                    <li><a href="#">List Property Now</a></li>
                    <li><a href="#">How to List</a></li>
                    <li><a href="#">Success Stories</a></li>
                    <li><a href="#">Legal Section</a></li>
                    <li><a href="#">Guarantees</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h4>Refer a Friend</h4>
                <p style="font-size: 13px; color: var(--text-medium); margin-bottom: 12px;">
                    Give $50, Get $50<br>
                    Share via WhatsApp, Email, SMS
                </p>
                <a href="#" class="btn btn-primary" style="padding: 8px 16px; font-size: 13px;">Invite Friends</a>
            </div>
            <div class="footer-column">
                <h4>Import Your Listing</h4>
                <p style="font-size: 13px; color: var(--text-medium); margin-bottom: 12px;">
                    Already listed elsewhere?<br>
                    We'll copy everything over in minutes.
                </p>
                <a href="#" class="btn btn-secondary" style="padding: 8px 16px; font-size: 13px;">Import Now</a>
            </div>
        </div>
    </footer>

    <!--
    ============================================================================
    JAVASCRIPT: LOOPS AND MODES INTERACTIONS
    ============================================================================
    -->
    <script>
        /*
         * ========================================================================
         * SESSION MEMORY - Long Loop p.119
         * "When a user returns to the microinteraction, ideally there is some
         * memory of previous use."
         * ========================================================================
         */

        // Initialize session data
        function initSessionMemory() {
            let sessionData = JSON.parse(localStorage.getItem('splitLeaseSession') || '{}');

            // Track session count - Long Loop p.117
            sessionData.sessionCount = (sessionData.sessionCount || 0) + 1;
            sessionData.lastSession = sessionData.currentSession || null;
            sessionData.currentSession = new Date().toISOString();

            localStorage.setItem('splitLeaseSession', JSON.stringify(sessionData));

            // Check if returning user - Re-Robustification p.119-120
            if (sessionData.lastSession) {
                const lastDate = new Date(sessionData.lastSession);
                const daysSinceLastSession = (new Date() - lastDate) / (1000 * 60 * 60 * 24);

                if (daysSinceLastSession > 14) {
                    document.getElementById('returnUserBanner').classList.add('visible');
                    document.getElementById('welcomeBanner').classList.add('hidden');
                }
            }

            // Restore collapsed sections - Long Loop p.119
            if (sessionData.collapsedSections) {
                sessionData.collapsedSections.forEach(sectionId => {
                    const section = document.getElementById(sectionId);
                    if (section) {
                        section.classList.add('collapsed');
                    }
                });
            }

            // Check expert mode preference - Progressive Reduction p.119-120
            if (sessionData.expertMode) {
                document.body.classList.add('expert-mode');
                document.getElementById('expertToggle').classList.add('active');
            }

            // Hide hints that were dismissed - Long Loop p.119
            if (sessionData.dismissedHints) {
                sessionData.dismissedHints.forEach(hintId => {
                    const hint = document.querySelector(`#hint-${hintId}`);
                    const indicator = hint?.previousElementSibling;
                    if (indicator) indicator.style.display = 'none';
                });
            }
        }

        initSessionMemory();

        /*
         * ========================================================================
         * EDIT MODE - p.111-112
         * "A mode is a fork in the rules"
         * "If you must have a mode, make it its own screen when possible"
         * ========================================================================
         */

        function enterEditMode(listingId) {
            // Show backdrop - Mode Separation p.112
            document.getElementById('editBackdrop').classList.add('active');

            // Show mode indicator - p.112 Clear indication
            document.getElementById('modeIndicator').classList.add('active');

            // Elevate listing card - Mode Transition p.112-113
            const card = document.getElementById(listingId);
            card.classList.add('editing');

            // Show edit header
            document.getElementById('editHeader' + listingId.slice(-1)).classList.add('active');

            // Update document title - Clear mode indication
            document.title = 'Split Lease - Editing...';
        }

        function exitEditMode(listingId) {
            // Hide backdrop
            document.getElementById('editBackdrop').classList.remove('active');

            // Hide mode indicator
            document.getElementById('modeIndicator').classList.remove('active');

            // Remove editing state - Mode Transition p.112-113
            const card = document.getElementById(listingId);
            card.classList.remove('editing');

            // Hide edit header
            document.getElementById('editHeader' + listingId.slice(-1)).classList.remove('active');

            // Restore document title
            document.title = 'Split Lease - Host Overview';
        }

        function saveAndExit(listingId) {
            // Would save data here
            exitEditMode(listingId);

            // Show success toast
            showUndoToast('Changes saved successfully', false);
        }

        // Close edit mode on backdrop click
        document.getElementById('editBackdrop').addEventListener('click', function() {
            document.querySelectorAll('.listing-card.editing').forEach(card => {
                exitEditMode(card.id);
            });
        });

        /*
         * ========================================================================
         * ONE-OFF MODE - p.113-114
         * "One-off modes are when a user initiates a mode that lasts for the
         * duration of a single action, then the mode turns off"
         * ========================================================================
         */

        let confirmTimers = {};

        function initiateAccept(proposalId, name) {
            // Show confirmation panel - One-Off Mode p.113-114
            document.getElementById('confirm-' + proposalId).classList.add('active');

            // Start auto-cancel timer (10 seconds)
            let timeLeft = 10;
            confirmTimers[proposalId] = setInterval(() => {
                timeLeft--;
                document.getElementById('timer-' + proposalId).textContent = `Auto-cancels in ${timeLeft}s`;

                if (timeLeft <= 0) {
                    cancelConfirm(proposalId);
                }
            }, 1000);
        }

        function cancelConfirm(proposalId) {
            // Hide confirmation panel
            document.getElementById('confirm-' + proposalId).classList.remove('active');

            // Clear timer
            if (confirmTimers[proposalId]) {
                clearInterval(confirmTimers[proposalId]);
                delete confirmTimers[proposalId];
            }

            // Reset timer text
            document.getElementById('timer-' + proposalId).textContent = 'Auto-cancels in 10s';
        }

        function confirmAccept(proposalId, name) {
            cancelConfirm(proposalId);

            // Show undo toast - One-Off Mode feedback
            showUndoToast(`Proposal from ${name} accepted`, true);

            // Store last action for undo
            window.lastAction = { type: 'accept', proposalId, name };
        }

        /*
         * ========================================================================
         * UNDO TOAST - One-Off Mode p.113-114
         * Allows recovery from one-off actions
         * ========================================================================
         */

        let undoTimer = null;

        function showUndoToast(message, showUndo = true) {
            const toast = document.getElementById('undoToast');
            document.getElementById('undoToastText').textContent = message;

            const undoBtn = toast.querySelector('.undo-toast-action');
            const timerEl = document.getElementById('undoTimer');

            undoBtn.style.display = showUndo ? 'block' : 'none';
            timerEl.style.display = showUndo ? 'block' : 'none';

            toast.classList.add('visible');

            if (showUndo) {
                let timeLeft = 5;
                timerEl.textContent = `${timeLeft}s`;

                undoTimer = setInterval(() => {
                    timeLeft--;
                    timerEl.textContent = `${timeLeft}s`;

                    if (timeLeft <= 0) {
                        hideUndoToast();
                    }
                }, 1000);
            } else {
                setTimeout(hideUndoToast, 3000);
            }
        }

        function hideUndoToast() {
            document.getElementById('undoToast').classList.remove('visible');
            if (undoTimer) {
                clearInterval(undoTimer);
                undoTimer = null;
            }
        }

        function undoAction() {
            hideUndoToast();
            // Would undo the last action here
            console.log('Undoing:', window.lastAction);
        }

        /*
         * ========================================================================
         * PROGRESSIVE DISCLOSURE - p.119
         * "Progressive disclosure over long periods of time"
         * ========================================================================
         */

        function toggleSection(sectionId) {
            const section = document.getElementById(sectionId);
            section.classList.toggle('collapsed');

            // Update toggle text
            const toggle = section.previousElementSibling;
            if (toggle && toggle.classList.contains('expand-toggle')) {
                toggle.classList.toggle('expanded');
                const textSpan = toggle.querySelector('span:last-child');
                if (textSpan) {
                    textSpan.textContent = section.classList.contains('collapsed')
                        ? 'Show details'
                        : 'Hide details';
                }
            }

            // Save state - Long Loop p.119
            let sessionData = JSON.parse(localStorage.getItem('splitLeaseSession') || '{}');
            sessionData.collapsedSections = sessionData.collapsedSections || [];

            if (section.classList.contains('collapsed')) {
                if (!sessionData.collapsedSections.includes(sectionId)) {
                    sessionData.collapsedSections.push(sectionId);
                }
            } else {
                sessionData.collapsedSections = sessionData.collapsedSections.filter(id => id !== sectionId);
            }

            localStorage.setItem('splitLeaseSession', JSON.stringify(sessionData));
        }

        function showMoreStories() {
            document.getElementById('story2').classList.remove('hidden');
            document.getElementById('story3').classList.remove('hidden');
            document.getElementById('showMoreStories').style.display = 'none';
        }

        /*
         * ========================================================================
         * FIRST-TIME HINTS - Long Loop p.119
         * "What can be done to make the microinteraction better the second time?"
         * ========================================================================
         */

        function showHint(hintId) {
            const tooltip = document.getElementById('hint-' + hintId);
            tooltip.classList.add('visible');
        }

        function dismissHint(hintId) {
            const tooltip = document.getElementById('hint-' + hintId);
            tooltip.classList.remove('visible');

            // Hide indicator permanently - Long Loop p.119
            const indicator = tooltip.previousElementSibling;
            if (indicator) indicator.style.display = 'none';

            // Save dismissed state
            let sessionData = JSON.parse(localStorage.getItem('splitLeaseSession') || '{}');
            sessionData.dismissedHints = sessionData.dismissedHints || [];
            if (!sessionData.dismissedHints.includes(hintId)) {
                sessionData.dismissedHints.push(hintId);
            }
            localStorage.setItem('splitLeaseSession', JSON.stringify(sessionData));
        }

        // Hide tooltips when clicking elsewhere
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.hint-container')) {
                document.querySelectorAll('.hint-tooltip.visible').forEach(tooltip => {
                    tooltip.classList.remove('visible');
                });
            }
        });

        /*
         * ========================================================================
         * EXPERT MODE - Progressive Reduction p.119-120
         * "Progressive reduction, where the microinteraction becomes simpler
         * over time"
         * ========================================================================
         */

        function toggleExpertMode() {
            document.body.classList.toggle('expert-mode');
            document.getElementById('expertToggle').classList.toggle('active');

            // Save preference - Long Loop p.119
            let sessionData = JSON.parse(localStorage.getItem('splitLeaseSession') || '{}');
            sessionData.expertMode = document.body.classList.contains('expert-mode');
            localStorage.setItem('splitLeaseSession', JSON.stringify(sessionData));
        }

        /*
         * ========================================================================
         * RETURN USER HANDLING - Re-Robustification p.119-120
         * ========================================================================
         */

        function dismissReturnBanner() {
            document.getElementById('returnUserBanner').classList.remove('visible');
        }

        function showChangelog() {
            alert('Changelog modal would appear here');
            dismissReturnBanner();
        }

        function dismissWelcomeBanner() {
            document.getElementById('welcomeBanner').classList.add('hidden');
        }

        /*
         * ========================================================================
         * BEHAVIORAL HELP LOOP - p.116
         * "If a user has paused at one part of the microinteraction for too long,
         * the microinteraction could prompt them with help"
         * ========================================================================
         */

        // Simulate behavioral detection - in production this would track actual dwell time
        let helpPromptTimer = null;

        document.querySelectorAll('.proposals-section').forEach(section => {
            section.addEventListener('mouseenter', function() {
                // Start timer - Behavioral Loop p.116
                helpPromptTimer = setTimeout(() => {
                    const helpPrompt = section.querySelector('.help-prompt');
                    if (helpPrompt && !helpPrompt.classList.contains('dismissed')) {
                        helpPrompt.classList.add('visible');
                    }
                }, 30000); // 30 seconds dwell time
            });

            section.addEventListener('mouseleave', function() {
                if (helpPromptTimer) {
                    clearTimeout(helpPromptTimer);
                    helpPromptTimer = null;
                }
            });
        });

        function dismissHelpPrompt() {
            document.getElementById('helpPrompt').classList.remove('visible');
            document.getElementById('helpPrompt').classList.add('dismissed');
        }

        /*
         * ========================================================================
         * CLOSED LOOP - Activity Feed Refresh p.115
         * "Closed loops have a feedback mechanism built in"
         * ========================================================================
         */

        // Would implement actual refresh logic in production
        // This demonstrates the closed loop concept

        let refreshInterval = 30000; // 30 seconds default

        document.addEventListener('visibilitychange', function() {
            // Pause refresh when tab is hidden - Closed Loop p.115
            if (document.hidden) {
                console.log('Tab hidden - pausing activity refresh');
            } else {
                console.log('Tab visible - resuming activity refresh');
            }
        });
    </script>

    <!--
    ============================================================================
    IMPLEMENTATION NOTES FOR DEVELOPERS
    ============================================================================

    LOOPS AND MODES PATTERNS IMPLEMENTED:

    1. MODES (p.111-114)
       - Edit Mode: Visual separation with backdrop, header bar, elevated card
       - Mode Indicator: Fixed badge showing current mode
       - Transitions: CSS animations on mode entry/exit
       - Exit mechanisms: Cancel button, backdrop click, Save button

    2. SPRING-LOADED MODES (p.113)
       - Proposal hover previews: Appear on hover, disappear on mouse-out
       - No state persistence - purely while mouse is hovering

    3. ONE-OFF MODES (p.113-114)
       - Proposal acceptance confirmation: Inline panel with timer
       - Auto-cancel after 10 seconds
       - Undo toast with 5-second window
       - State clears after action completes

    4. PROGRESSIVE DISCLOSURE (p.119)
       - Collapsible sections: Comparison metrics, pricing context
       - Show more: Success stories
       - First-time hints: Pulsing indicators with tooltips

    5. PROGRESSIVE REDUCTION (p.119-120)
       - Expert Mode toggle: Removes hints, collapses sections, hides labels
       - Persisted preference across sessions

    6. LONG LOOPS (p.117-119)
       - Session memory: Collapsed states, preferences, dismissed hints
       - Session counting for progressive disclosure
       - Cross-session persistence via localStorage

    7. RE-ROBUSTIFICATION (p.119-120)
       - Return user detection: Shows welcome-back banner after 14+ days
       - Option to "See What's New" or "I Remember"

    8. BEHAVIORAL LOOPS (p.116)
       - Hesitation detection: Help prompt after 30s dwell time
       - Contextual assistance based on behavior

    9. CLOSED LOOPS (p.115)
       - Activity feed refresh: Pauses when tab hidden
       - Adaptive refresh rate based on user interaction

    DATA REQUIREMENTS:
    - localStorage for session memory and preferences
    - Server sync for cross-device persistence (not implemented in mockup)
    - Analytics events for behavioral tracking

    SAFEGUARDS:
    - Edit mode requires explicit confirmation before data changes
    - One-off confirmation prevents accidental proposal acceptance
    - Undo window allows recovery from mistakes
    - Expert mode is opt-in, never forced

    ============================================================================
    -->

</body>
</html>
