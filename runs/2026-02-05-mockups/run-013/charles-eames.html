<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Split Lease - Host Overview (Divergent Microinteractions)</title>

    <!--
    ============================================================================
    DIVERGENT MICROINTERACTIONS IMPLEMENTATION
    Based on Dan Saffer's "Microinteractions: Designing with Details"

    Agent: Charles Eames
    Date: 2026-02-05
    Run: 013 (Divergent Thinking Exercise)

    PHILOSOPHY: "Play is the highest form of research."

    This mockup implements PLAYFUL microinteractions that prioritize:
    - DELIGHT over efficiency
    - MEMORY over statelessness
    - PERSONALITY over neutrality
    - DISCOVERY over predictability

    Every unconventional choice is documented. Being wrong is acceptable.
    Being forgettable is not.
    ============================================================================
    -->

    <style>
        /* ==========================================================================
           DIVERGENT DESIGN TOKENS
           Base: Alchemy tokens #31135D, #5B5FCF
           Philosophy: Colors that can shift with seasons and moods
           ========================================================================== */
        :root {
            /* Brand Colors - Primary (Alchemy tokens) */
            --color-primary: #31135D;
            --color-primary-dark: #1F0D3D;
            --color-primary-light: #5B5FCF;

            /*
            DIVERGENT IDEA: SEASONAL PALETTE SHIFT
            These CSS variables can be modified by JavaScript based on season.
            Winter: cooler, Summer: warmer, Spring: fresher, Fall: earthier
            */
            --season-temp: 0deg; /* Hue rotation for seasonal feeling */
            --season-saturation: 100%; /* Saturation adjustment */

            /* Semantic Colors */
            --color-success: #5B5FCF;
            --color-warning: #D97706;
            --color-danger: #DC2626;

            /* Neutral Colors */
            --color-gray-50: #F9FAFB;
            --color-gray-100: #F3F4F6;
            --color-gray-200: #E5E7EB;
            --color-gray-300: #D1D5DB;
            --color-gray-500: #6B7280;
            --color-gray-700: #374151;
            --color-gray-800: #1F2937;

            /*
            DIVERGENT: TEXTURAL FEEDBACK VARIABLES
            These shift based on UI state - success feels "smoother"
            */
            --texture-smooth: 12px;
            --texture-rough: 6px;
            --texture-current: var(--texture-smooth);

            /* Playful timing */
            --timing-anticipation: 0.6s; /* Longer for ritual */
            --timing-snappy: 0.15s;
            --timing-breath: 0.3s;

            /* Border Radius */
            --radius-sm: 4px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --radius-xl: 16px;

            /* Shadows (Elevation System) */
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.08);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.12);
            --shadow-lg: 0 8px 24px rgba(0,0,0,0.16);
            --shadow-glow: 0 0 20px rgba(91, 95, 207, 0.3);

            /* Typography */
            --font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            --font-size-xs: 12px;
            --font-size-sm: 14px;
            --font-size-base: 16px;
            --font-size-lg: 18px;
            --font-size-xl: 24px;
            --font-size-2xl: 32px;

            /* Spacing */
            --space-1: 4px;
            --space-2: 8px;
            --space-3: 12px;
            --space-4: 16px;
            --space-5: 20px;
            --space-6: 24px;
            --space-8: 32px;
        }

        /*
        DIVERGENT: KONAMI CODE EASTER EGG THEME
        Unlocked by entering: up up down down left right left right b a
        Transforms dashboard into retro "Landlord Tycoon" mode
        */
        :root.konami-mode {
            --color-primary: #1a1a2e;
            --color-primary-light: #16c79a;
            --color-gray-50: #0f0f1a;
            --color-gray-100: #1a1a2e;
            --color-gray-800: #e8e8e8;
            --font-family: 'Courier New', monospace;
        }

        .konami-mode * {
            image-rendering: pixelated !important;
        }

        .konami-mode .logo::after {
            content: " TYCOON";
            color: #16c79a;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family);
            font-size: var(--font-size-base);
            line-height: 1.6;
            color: var(--color-gray-800);
            background-color: var(--color-gray-50);
            /*
            SEASONAL FILTER: Subtle hue rotation based on time of year
            Applied at body level for global effect
            */
            filter: hue-rotate(var(--season-temp)) saturate(var(--season-saturation));
            transition: filter 2s ease;
        }

        /* ==========================================================================
           HEADER with ACCUMULATING FEEDBACK
           The golden dots next to user name accumulate with successful leases
           ========================================================================== */
        .header {
            background: var(--color-primary);
            padding: var(--space-4) var(--space-6);
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: var(--space-8);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            color: white;
            font-size: var(--font-size-xl);
            font-weight: 700;
            text-decoration: none;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--color-primary);
            font-weight: 800;
        }

        .nav-link {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            font-size: var(--font-size-sm);
            padding: var(--space-2) var(--space-4);
            border-radius: var(--radius-md);
            transition: all var(--timing-breath);
        }

        .nav-link:hover,
        .nav-link.active {
            color: white;
            background: rgba(255, 255, 255, 0.1);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: var(--space-4);
        }

        .header-btn {
            background: rgba(255, 255, 255, 0.15);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--font-size-lg);
            transition: all var(--timing-breath);
            position: relative;
        }

        .header-btn:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: scale(1.05);
        }

        .notification-badge {
            position: absolute;
            top: -2px;
            right: -2px;
            background: var(--color-danger);
            color: white;
            font-size: var(--font-size-xs);
            font-weight: 600;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: badge-pulse 2s infinite;
        }

        @keyframes badge-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            color: white;
            cursor: pointer;
            padding: var(--space-2) var(--space-3);
            border-radius: var(--radius-md);
            transition: all var(--timing-breath);
        }

        .user-menu:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            background: var(--color-warning);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: var(--font-size-sm);
            position: relative;
        }

        /*
        DIVERGENT: ACCUMULATING SUCCESS INDICATORS
        These golden dots appear around the avatar based on successful leases.
        Stored in localStorage and persist across sessions.
        */
        .success-dots {
            position: absolute;
            top: -4px;
            right: -4px;
            display: flex;
            gap: 2px;
        }

        .success-dot {
            width: 6px;
            height: 6px;
            background: linear-gradient(135deg, #FFD700, #FFA500);
            border-radius: 50%;
            box-shadow: 0 0 4px rgba(255, 215, 0, 0.6);
            animation: dot-sparkle 3s infinite;
        }

        .success-dot:nth-child(2) { animation-delay: 1s; }
        .success-dot:nth-child(3) { animation-delay: 2s; }

        @keyframes dot-sparkle {
            0%, 100% { opacity: 0.8; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        /* ==========================================================================
           MAIN CONTAINER
           ========================================================================== */
        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--space-6);
        }

        /* ==========================================================================
           WELCOME SECTION - THE GROWING WELCOME
           Greeting evolves based on user history (stored in localStorage)
           ========================================================================== */
        .welcome-section {
            margin-bottom: var(--space-6);
        }

        .welcome-greeting {
            font-size: var(--font-size-2xl);
            font-weight: 700;
            color: var(--color-gray-800);
            margin-bottom: var(--space-1);
            /*
            DIVERGENT: Greeting text is dynamically set by JavaScript
            based on user's journey stage
            */
        }

        /*
        DIVERGENT: JOURNEY INDICATOR
        A subtle badge showing how long user has been a host
        */
        .journey-badge {
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
            background: linear-gradient(135deg, var(--color-primary-light), var(--color-primary));
            color: white;
            padding: var(--space-1) var(--space-3);
            border-radius: var(--radius-xl);
            font-size: var(--font-size-xs);
            font-weight: 600;
            margin-top: var(--space-2);
            opacity: 0;
            transform: translateY(10px);
            animation: journey-reveal 0.6s ease forwards;
            animation-delay: 0.5s;
        }

        @keyframes journey-reveal {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .welcome-subtext {
            color: var(--color-gray-500);
            font-size: var(--font-size-base);
        }

        /*
        DIVERGENT: PATTERN RECOGNITION NOTE
        System notices patterns and mentions them subtly
        */
        .pattern-note {
            margin-top: var(--space-3);
            padding: var(--space-3) var(--space-4);
            background: rgba(91, 95, 207, 0.08);
            border-left: 3px solid var(--color-primary-light);
            border-radius: 0 var(--radius-md) var(--radius-md) 0;
            font-size: var(--font-size-sm);
            color: var(--color-gray-700);
            display: none; /* Shown conditionally by JS */
        }

        .pattern-note.visible {
            display: block;
            animation: pattern-fade 0.4s ease;
        }

        @keyframes pattern-fade {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }

        /* ==========================================================================
           SOCIAL SHADOWS - Anonymous activity indicators
           ========================================================================== */
        .social-shadow {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-2) var(--space-4);
            background: var(--color-gray-100);
            border-radius: var(--radius-xl);
            font-size: var(--font-size-sm);
            color: var(--color-gray-500);
            margin-bottom: var(--space-4);
        }

        .social-dot {
            width: 8px;
            height: 8px;
            background: var(--color-success);
            border-radius: 50%;
            animation: social-pulse 2s infinite;
        }

        @keyframes social-pulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        /* ==========================================================================
           STATUS SUMMARY CARDS
           ========================================================================== */
        .status-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-4);
            margin-bottom: var(--space-6);
        }

        .status-card {
            background: white;
            border-radius: var(--texture-current);
            padding: var(--space-5);
            box-shadow: var(--shadow-sm);
            transition: all var(--timing-breath);
            cursor: default;
        }

        /*
        DIVERGENT: TEXTURAL FEEDBACK
        Cards feel "smoother" (higher border-radius) when hovered
        Visual texture communicates state
        */
        .status-card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
            border-radius: var(--radius-lg);
        }

        .status-card-icon {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--font-size-xl);
            margin-bottom: var(--space-3);
        }

        .status-card-icon.listings {
            background: linear-gradient(135deg, var(--color-primary), var(--color-primary-light));
            color: white;
        }

        .status-card-icon.proposals {
            background: #FEF3C7;
            color: var(--color-warning);
        }

        .status-card-icon.active {
            background: #E0E1F9;
            color: var(--color-success);
        }

        .status-card-icon.revenue {
            background: var(--color-gray-100);
            color: var(--color-gray-500);
        }

        .status-card-number {
            font-size: 30px;
            font-weight: 700;
            color: var(--color-gray-800);
            line-height: 1.2;
        }

        .status-card-label {
            font-size: var(--font-size-sm);
            color: var(--color-gray-500);
            margin-top: var(--space-1);
        }

        /* ==========================================================================
           ACTION BANNER
           ========================================================================== */
        .action-banner {
            background: linear-gradient(135deg, #FEF3C7, #FEF9C3);
            border: 1px solid var(--color-warning);
            border-radius: var(--radius-lg);
            padding: var(--space-5);
            margin-bottom: var(--space-6);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: var(--space-4);
        }

        .action-banner-content {
            display: flex;
            align-items: center;
            gap: var(--space-4);
        }

        .action-banner-icon {
            width: 48px;
            height: 48px;
            background: var(--color-warning);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: var(--font-size-xl);
            animation: banner-pulse 2s infinite;
        }

        @keyframes banner-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .action-banner-text h3 {
            font-size: var(--font-size-lg);
            font-weight: 600;
            color: var(--color-gray-800);
            margin-bottom: var(--space-1);
        }

        .action-banner-text p {
            font-size: var(--font-size-sm);
            color: var(--color-gray-700);
        }

        .action-banner-btn {
            background: var(--color-primary);
            color: white;
            border: none;
            padding: var(--space-3) var(--space-6);
            border-radius: var(--radius-md);
            font-size: var(--font-size-base);
            font-weight: 600;
            cursor: pointer;
            transition: all var(--timing-breath);
            white-space: nowrap;
            position: relative;
            overflow: hidden;
        }

        .action-banner-btn:hover {
            background: var(--color-primary-dark);
            transform: scale(1.02);
        }

        /*
        DIVERGENT: TIRED TRIGGER
        Button shows message if clicked rapidly (5+ times in 2 seconds)
        */
        .action-banner-btn.tired::after {
            content: "One click is enough :)";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--color-primary-dark);
            padding: var(--space-2) var(--space-4);
            white-space: nowrap;
            font-size: var(--font-size-sm);
            animation: tired-message 2s ease forwards;
        }

        @keyframes tired-message {
            0% { opacity: 0; }
            10% { opacity: 1; }
            80% { opacity: 1; }
            100% { opacity: 0; }
        }

        /* ==========================================================================
           LISTINGS SECTION
           ========================================================================== */
        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--space-4);
        }

        .section-title {
            font-size: var(--font-size-xl);
            font-weight: 600;
            color: var(--color-gray-800);
        }

        .section-action {
            background: var(--color-primary);
            color: white;
            border: none;
            padding: var(--space-2) var(--space-4);
            border-radius: var(--radius-md);
            font-size: var(--font-size-sm);
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: var(--space-2);
            transition: all var(--timing-breath);
        }

        .section-action:hover {
            background: var(--color-primary-dark);
        }

        .listings-grid {
            display: grid;
            gap: var(--space-4);
        }

        .listing-card {
            background: white;
            border-radius: var(--radius-md);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            display: grid;
            grid-template-columns: 180px 1fr auto;
            align-items: center;
            transition: all var(--timing-breath);
            cursor: pointer;
        }

        /*
        DIVERGENT: RIPPLE EFFECT
        When a proposal is accepted, a ripple emanates from this card
        */
        .listing-card.rippling {
            animation: card-ripple 0.8s ease;
        }

        @keyframes card-ripple {
            0% { box-shadow: var(--shadow-sm), 0 0 0 0 rgba(91, 95, 207, 0.3); }
            50% { box-shadow: var(--shadow-md), 0 0 0 20px rgba(91, 95, 207, 0); }
            100% { box-shadow: var(--shadow-sm), 0 0 0 0 rgba(91, 95, 207, 0); }
        }

        .listing-card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        .listing-thumbnail {
            width: 180px;
            height: 120px;
            background: var(--color-gray-200);
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .listing-status-badge {
            position: absolute;
            top: var(--space-2);
            left: var(--space-2);
            padding: var(--space-1) var(--space-2);
            border-radius: var(--radius-sm);
            font-size: var(--font-size-xs);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .listing-status-badge.active {
            background: var(--color-success);
            color: white;
        }

        .listing-status-badge.attention {
            background: var(--color-warning);
            color: white;
        }

        .listing-status-badge.incomplete {
            background: var(--color-gray-500);
            color: white;
        }

        .listing-content {
            padding: var(--space-4) var(--space-5);
        }

        .listing-title {
            font-size: var(--font-size-lg);
            font-weight: 600;
            color: var(--color-gray-800);
            margin-bottom: var(--space-1);
        }

        .listing-location {
            font-size: var(--font-size-sm);
            color: var(--color-gray-500);
            display: flex;
            align-items: center;
            gap: var(--space-1);
            margin-bottom: var(--space-3);
        }

        .listing-stats {
            display: flex;
            gap: var(--space-4);
        }

        .listing-stat {
            display: flex;
            align-items: center;
            gap: var(--space-1);
            font-size: var(--font-size-sm);
            color: var(--color-gray-700);
        }

        .listing-stat.highlight {
            color: var(--color-warning);
            font-weight: 600;
        }

        .listing-actions {
            padding: var(--space-4) var(--space-5);
            display: flex;
            flex-direction: column;
            gap: var(--space-2);
            align-items: flex-end;
        }

        .listing-primary-btn {
            background: var(--color-primary);
            color: white;
            border: none;
            padding: var(--space-2) var(--space-5);
            border-radius: var(--radius-md);
            font-size: var(--font-size-sm);
            font-weight: 600;
            cursor: pointer;
            transition: all var(--timing-breath);
            min-width: 140px;
            text-align: center;
            position: relative;
        }

        .listing-primary-btn:hover {
            background: var(--color-primary-dark);
        }

        .listing-primary-btn.attention {
            background: var(--color-warning);
        }

        .listing-primary-btn.attention:hover {
            background: #B45309;
        }

        /*
        DIVERGENT: HESITATION TRIGGER TOOLTIP
        After hovering 3+ seconds, a more helpful tooltip appears
        */
        .listing-primary-btn[data-hesitation]::after {
            content: attr(data-hesitation);
            position: absolute;
            bottom: 110%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--color-gray-800);
            color: white;
            padding: var(--space-2) var(--space-3);
            border-radius: var(--radius-md);
            font-size: var(--font-size-xs);
            font-weight: 400;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity var(--timing-breath);
        }

        .listing-primary-btn.hesitating::after {
            opacity: 1;
        }

        .listing-secondary-btn {
            background: white;
            color: var(--color-primary);
            border: 1px solid var(--color-primary);
            padding: var(--space-1) var(--space-3);
            border-radius: var(--radius-md);
            font-size: var(--font-size-sm);
            cursor: pointer;
            transition: all var(--timing-breath);
        }

        .listing-secondary-btn:hover {
            background: var(--color-primary);
            color: white;
        }

        /* Progress bar for incomplete listings */
        .listing-progress {
            margin-top: var(--space-3);
        }

        .progress-bar {
            height: 6px;
            background: var(--color-gray-200);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--color-primary), var(--color-primary-light));
            border-radius: 3px;
            transition: width var(--timing-anticipation) ease;
        }

        .progress-text {
            font-size: var(--font-size-xs);
            color: var(--color-gray-500);
            margin-top: var(--space-1);
        }

        /* ==========================================================================
           PROPOSAL REVIEW MODAL - THE ANTICIPATION RITUAL
           ========================================================================== */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: var(--space-4);
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: white;
            border-radius: var(--radius-xl);
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-lg);
        }

        .modal-header {
            padding: var(--space-5) var(--space-6);
            border-bottom: 1px solid var(--color-gray-200);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .modal-title {
            font-size: var(--font-size-xl);
            font-weight: 600;
            color: var(--color-gray-800);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: var(--font-size-2xl);
            color: var(--color-gray-500);
            cursor: pointer;
            padding: var(--space-1);
            line-height: 1;
            transition: color var(--timing-snappy);
        }

        .modal-close:hover {
            color: var(--color-gray-800);
        }

        .modal-body {
            padding: var(--space-6);
        }

        .proposal-context {
            background: var(--color-gray-50);
            border-radius: var(--radius-md);
            padding: var(--space-4);
            margin-bottom: var(--space-5);
        }

        .proposal-context-title {
            font-size: var(--font-size-sm);
            color: var(--color-gray-500);
            margin-bottom: var(--space-1);
        }

        .proposal-context-listing {
            font-size: var(--font-size-base);
            font-weight: 600;
            color: var(--color-gray-800);
        }

        .proposal-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-4);
            margin-bottom: var(--space-5);
        }

        .proposal-detail {
            padding: var(--space-3);
            background: var(--color-gray-50);
            border-radius: var(--radius-md);
        }

        .proposal-detail-label {
            font-size: var(--font-size-xs);
            color: var(--color-gray-500);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: var(--space-1);
        }

        .proposal-detail-value {
            font-size: var(--font-size-lg);
            font-weight: 600;
            color: var(--color-gray-800);
        }

        .proposal-message {
            margin-bottom: var(--space-5);
        }

        .proposal-message-label {
            font-size: var(--font-size-sm);
            font-weight: 600;
            color: var(--color-gray-700);
            margin-bottom: var(--space-2);
        }

        .proposal-message-text {
            font-size: var(--font-size-base);
            color: var(--color-gray-700);
            line-height: 1.7;
            padding: var(--space-4);
            background: var(--color-gray-50);
            border-radius: var(--radius-md);
            border-left: 3px solid var(--color-primary);
        }

        .modal-actions {
            display: flex;
            gap: var(--space-3);
            padding-top: var(--space-4);
            border-top: 1px solid var(--color-gray-200);
        }

        .modal-btn {
            flex: 1;
            padding: var(--space-3) var(--space-4);
            border-radius: var(--radius-md);
            font-size: var(--font-size-base);
            font-weight: 600;
            cursor: pointer;
            transition: all var(--timing-breath);
            position: relative;
            overflow: hidden;
        }

        .modal-btn.decline {
            background: white;
            color: var(--color-danger);
            border: 1px solid var(--color-danger);
        }

        .modal-btn.decline:hover {
            background: var(--color-danger);
            color: white;
        }

        .modal-btn.negotiate {
            background: white;
            color: var(--color-primary);
            border: 1px solid var(--color-primary);
        }

        .modal-btn.negotiate:hover {
            background: var(--color-primary);
            color: white;
        }

        .modal-btn.accept {
            background: var(--color-success);
            color: white;
            border: 1px solid var(--color-success);
        }

        .modal-btn.accept:hover {
            background: #4A4AB8;
        }

        /*
        DIVERGENT: THE ANTICIPATION DELAY
        Accept button triggers a ritual animation before confirming
        Creates emotional weight for the decision
        */
        .modal-btn.accept.accepting {
            pointer-events: none;
        }

        .accept-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 4px;
            background: rgba(255, 255, 255, 0.5);
            width: 0;
            transition: width var(--timing-anticipation) linear;
        }

        .modal-btn.accept.accepting .accept-progress {
            width: 100%;
        }

        /* Celebration confetti burst */
        @keyframes confetti-fall {
            0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            z-index: 1001;
            animation: confetti-fall 3s ease forwards;
        }

        .confetti:nth-child(odd) {
            background: var(--color-primary-light);
        }

        .confetti:nth-child(even) {
            background: var(--color-warning);
        }

        /* ==========================================================================
           COLLAPSIBLE SECTIONS
           ========================================================================== */
        .collapsible-section {
            background: white;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            margin-top: var(--space-6);
            overflow: hidden;
        }

        .collapsible-header {
            padding: var(--space-4) var(--space-5);
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            transition: background var(--timing-snappy);
        }

        .collapsible-header:hover {
            background: var(--color-gray-50);
        }

        .collapsible-title {
            font-size: var(--font-size-base);
            font-weight: 600;
            color: var(--color-gray-700);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .collapsible-icon {
            color: var(--color-gray-500);
            transition: transform var(--timing-breath);
        }

        .collapsible-section.open .collapsible-icon {
            transform: rotate(180deg);
        }

        .collapsible-content {
            display: none;
            padding: 0 var(--space-5) var(--space-5);
        }

        .collapsible-section.open .collapsible-content {
            display: block;
        }

        .empty-state {
            text-align: center;
            padding: var(--space-8) var(--space-4);
        }

        .empty-state-icon {
            width: 64px;
            height: 64px;
            background: var(--color-gray-100);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto var(--space-4);
            font-size: var(--font-size-2xl);
            color: var(--color-gray-500);
        }

        .empty-state-title {
            font-size: var(--font-size-lg);
            font-weight: 600;
            color: var(--color-gray-800);
            margin-bottom: var(--space-2);
        }

        .empty-state-text {
            font-size: var(--font-size-sm);
            color: var(--color-gray-500);
            max-width: 300px;
            margin: 0 auto var(--space-4);
        }

        .empty-state-btn {
            background: var(--color-primary);
            color: white;
            border: none;
            padding: var(--space-2) var(--space-5);
            border-radius: var(--radius-md);
            font-size: var(--font-size-sm);
            font-weight: 600;
            cursor: pointer;
            transition: all var(--timing-breath);
        }

        .empty-state-btn:hover {
            background: var(--color-primary-dark);
        }

        /* ==========================================================================
           TIME CAPSULE FEATURE
           Leave a message to your future self
           ========================================================================== */
        .time-capsule {
            background: linear-gradient(135deg, rgba(91, 95, 207, 0.08), rgba(49, 19, 93, 0.08));
            border: 1px dashed var(--color-primary-light);
            border-radius: var(--radius-md);
            padding: var(--space-4);
            margin-top: var(--space-6);
            text-align: center;
        }

        .time-capsule-icon {
            font-size: var(--font-size-2xl);
            margin-bottom: var(--space-2);
        }

        .time-capsule-title {
            font-size: var(--font-size-sm);
            font-weight: 600;
            color: var(--color-primary);
            margin-bottom: var(--space-1);
        }

        .time-capsule-text {
            font-size: var(--font-size-sm);
            color: var(--color-gray-500);
        }

        .time-capsule-btn {
            background: transparent;
            color: var(--color-primary);
            border: 1px solid var(--color-primary);
            padding: var(--space-2) var(--space-4);
            border-radius: var(--radius-md);
            font-size: var(--font-size-sm);
            font-weight: 600;
            cursor: pointer;
            margin-top: var(--space-3);
            transition: all var(--timing-breath);
        }

        .time-capsule-btn:hover {
            background: var(--color-primary);
            color: white;
        }

        /* ==========================================================================
           RESPONSIVE DESIGN
           ========================================================================== */
        @media (max-width: 768px) {
            .header {
                padding: var(--space-3) var(--space-4);
            }

            .header-left {
                gap: var(--space-4);
            }

            .nav-link {
                display: none;
            }

            .main-container {
                padding: var(--space-4);
            }

            .status-summary {
                grid-template-columns: repeat(2, 1fr);
            }

            .listing-card {
                grid-template-columns: 1fr;
            }

            .listing-thumbnail {
                width: 100%;
                height: 160px;
            }

            .listing-actions {
                flex-direction: row;
                justify-content: space-between;
                padding-top: 0;
            }

            .action-banner {
                flex-direction: column;
                text-align: center;
            }

            .action-banner-content {
                flex-direction: column;
            }

            .proposal-details {
                grid-template-columns: 1fr;
            }

            .modal-actions {
                flex-direction: column;
            }
        }

        /* Utility */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            border: 0;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-left">
            <a href="#" class="logo">
                <span class="logo-icon">SL</span>
                <span>Split Lease</span>
            </a>
            <nav>
                <a href="#" class="nav-link active">Host Overview</a>
                <a href="#" class="nav-link">My Listings</a>
                <a href="#" class="nav-link">Calendar</a>
            </nav>
        </div>
        <div class="header-right">
            <button class="header-btn" aria-label="Messages">
                <span>&#9993;</span>
                <span class="notification-badge">2</span>
            </button>
            <button class="header-btn" aria-label="Notifications">
                <span>&#128276;</span>
            </button>
            <div class="user-menu">
                <span class="user-avatar">
                    R
                    <!--
                    DIVERGENT: ACCUMULATING SUCCESS DOTS
                    These appear based on successful leases stored in localStorage
                    -->
                    <span class="success-dots" id="successDots">
                        <!-- Dots injected by JavaScript -->
                    </span>
                </span>
                <span>Rod</span>
                <span>&#9662;</span>
            </div>
        </div>
    </header>

    <main class="main-container">
        <!--
        DIVERGENT: SOCIAL SHADOWS
        Anonymous activity indicator showing other hosts are online
        -->
        <div class="social-shadow">
            <span class="social-dot"></span>
            <span id="socialText">5 other Brooklyn hosts are active right now</span>
        </div>

        <!--
        DIVERGENT: THE GROWING WELCOME
        Greeting evolves based on user journey stored in localStorage
        -->
        <section class="welcome-section">
            <h1 class="welcome-greeting" id="welcomeGreeting">Welcome back, Rod!</h1>
            <p class="welcome-subtext" id="welcomeSubtext">Here's how your listings are performing today.</p>
            <span class="journey-badge" id="journeyBadge">
                <!--
                JOURNEY INDICATOR
                Shows how long user has been a host
                -->
            </span>
            <!--
            DIVERGENT: PATTERN RECOGNITION NOTE
            Shows when system detects user patterns
            -->
            <div class="pattern-note" id="patternNote">
                <!-- Pattern message injected by JavaScript -->
            </div>
        </section>

        <section class="status-summary">
            <div class="status-card">
                <div class="status-card-icon listings">&#127968;</div>
                <div class="status-card-number">4</div>
                <div class="status-card-label">Total Listings</div>
            </div>
            <div class="status-card">
                <div class="status-card-icon proposals">&#128172;</div>
                <div class="status-card-number">3</div>
                <div class="status-card-label">New Proposals</div>
            </div>
            <div class="status-card">
                <div class="status-card-icon active">&#9989;</div>
                <div class="status-card-number">2</div>
                <div class="status-card-label">Active Leases</div>
            </div>
            <div class="status-card">
                <div class="status-card-icon revenue">&#128176;</div>
                <div class="status-card-number">$2,400</div>
                <div class="status-card-label">This Month</div>
            </div>
        </section>

        <section class="action-banner">
            <div class="action-banner-content">
                <div class="action-banner-icon">&#128172;</div>
                <div class="action-banner-text">
                    <h3>You have 3 new proposals waiting</h3>
                    <p>Review them now to respond to potential tenants.</p>
                </div>
            </div>
            <button class="action-banner-btn" id="reviewBannerBtn">Review Proposals</button>
        </section>

        <section class="listings-section">
            <div class="section-header">
                <h2 class="section-title">Your Listings</h2>
                <button class="section-action">
                    <span>+</span>
                    <span>Add Listing</span>
                </button>
            </div>

            <div class="listings-grid">
                <!--
                DIVERGENT: HESITATION TRIGGERS on buttons
                Hovering for 3+ seconds shows helpful tooltip
                -->
                <article class="listing-card" id="listing1">
                    <div class="listing-thumbnail" style="background-image: url('https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?w=400');">
                        <span class="listing-status-badge attention">2 Proposals</span>
                    </div>
                    <div class="listing-content">
                        <h3 class="listing-title">Stylish Private Room in Vibrant Neighborhood</h3>
                        <p class="listing-location">
                            <span>&#128205;</span>
                            Brooklyn, NY
                        </p>
                        <div class="listing-stats">
                            <span class="listing-stat">&#128065; 45 views</span>
                            <span class="listing-stat highlight">&#128172; 2 proposals</span>
                        </div>
                    </div>
                    <div class="listing-actions">
                        <button class="listing-primary-btn attention hesitation-trigger"
                                data-hesitation="Not sure? You can negotiate terms or ask questions first."
                                onclick="openModal()">
                            Review Proposals
                        </button>
                        <button class="listing-secondary-btn">View Details &#8594;</button>
                    </div>
                </article>

                <article class="listing-card" id="listing2">
                    <div class="listing-thumbnail" style="background-image: url('https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=400');">
                        <span class="listing-status-badge active">Active</span>
                    </div>
                    <div class="listing-content">
                        <h3 class="listing-title">1 Bedroom Entire Place in Manhattan</h3>
                        <p class="listing-location">
                            <span>&#128205;</span>
                            Manhattan, NY
                        </p>
                        <div class="listing-stats">
                            <span class="listing-stat">&#128065; 128 views</span>
                            <span class="listing-stat highlight">&#128172; 1 proposal</span>
                        </div>
                    </div>
                    <div class="listing-actions">
                        <button class="listing-primary-btn attention hesitation-trigger"
                                data-hesitation="Take your time. This decision shapes your next 6 months."
                                onclick="openModal()">
                            Review Proposal
                        </button>
                        <button class="listing-secondary-btn">View Details &#8594;</button>
                    </div>
                </article>

                <article class="listing-card" id="listing3">
                    <div class="listing-thumbnail" style="background-image: url('https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=400');">
                        <span class="listing-status-badge active">Active</span>
                    </div>
                    <div class="listing-content">
                        <h3 class="listing-title">Cozy Studio Near Central Park</h3>
                        <p class="listing-location">
                            <span>&#128205;</span>
                            Upper West Side, NY
                        </p>
                        <div class="listing-stats">
                            <span class="listing-stat">&#128065; 67 views</span>
                            <span class="listing-stat">&#128172; No proposals yet</span>
                        </div>
                    </div>
                    <div class="listing-actions">
                        <button class="listing-primary-btn">View Details</button>
                        <button class="listing-secondary-btn">Edit Listing &#8594;</button>
                    </div>
                </article>

                <article class="listing-card" id="listing4">
                    <div class="listing-thumbnail" style="background: var(--color-gray-200);">
                        <span class="listing-status-badge incomplete">Draft</span>
                    </div>
                    <div class="listing-content">
                        <h3 class="listing-title">1 Bedroom Private Room in Manhattan</h3>
                        <p class="listing-location">
                            <span>&#128205;</span>
                            Manhattan, NY
                        </p>
                        <div class="listing-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 70%;"></div>
                            </div>
                            <p class="progress-text">70% complete - Add photos to publish</p>
                        </div>
                    </div>
                    <div class="listing-actions">
                        <button class="listing-primary-btn">Continue Setup</button>
                        <button class="listing-secondary-btn">Preview &#8594;</button>
                    </div>
                </article>
            </div>
        </section>

        <section class="collapsible-section">
            <div class="collapsible-header" onclick="toggleSection(this)">
                <span class="collapsible-title">
                    <span>&#128218;</span>
                    House Manuals
                </span>
                <span class="collapsible-icon">&#9662;</span>
            </div>
            <div class="collapsible-content">
                <div class="empty-state">
                    <div class="empty-state-icon">&#128218;</div>
                    <h3 class="empty-state-title">Create Your First House Manual</h3>
                    <p class="empty-state-text">Help guests feel at home with check-in instructions, house rules, and local tips.</p>
                    <button class="empty-state-btn">Create Manual</button>
                </div>
            </div>
        </section>

        <section class="collapsible-section">
            <div class="collapsible-header" onclick="toggleSection(this)">
                <span class="collapsible-title">
                    <span>&#127873;</span>
                    Refer a Friend - Earn $50
                </span>
                <span class="collapsible-icon">&#9662;</span>
            </div>
            <div class="collapsible-content">
                <div class="empty-state">
                    <div class="empty-state-icon">&#127873;</div>
                    <h3 class="empty-state-title">Share Split Lease</h3>
                    <p class="empty-state-text">Invite friends to host with Split Lease. You both get $50 when they list their first property.</p>
                    <button class="empty-state-btn">Get Referral Link</button>
                </div>
            </div>
        </section>

        <!--
        DIVERGENT: TIME CAPSULE FEATURE
        Leave a message to your future self
        -->
        <div class="time-capsule">
            <div class="time-capsule-icon">&#128140;</div>
            <p class="time-capsule-title">Time Capsule</p>
            <p class="time-capsule-text">Leave a note for future-you. We'll remind you in 6 months.</p>
            <button class="time-capsule-btn" onclick="alert('Coming soon: Leave a message for yourself about rent adjustments, renewal decisions, or hosting goals.')">Write a Note</button>
        </div>
    </main>

    <!--
    PROPOSAL REVIEW MODAL
    Features THE ANTICIPATION DELAY - a ritual animation before accepting
    -->
    <div class="modal-overlay" id="proposalModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Review Proposal</h2>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="proposal-context">
                    <p class="proposal-context-title">Proposal for</p>
                    <p class="proposal-context-listing">Stylish Private Room in Vibrant Neighborhood</p>
                </div>

                <div class="proposal-details">
                    <div class="proposal-detail">
                        <p class="proposal-detail-label">Proposed Rent</p>
                        <p class="proposal-detail-value">$1,200/mo</p>
                    </div>
                    <div class="proposal-detail">
                        <p class="proposal-detail-label">Move-in Date</p>
                        <p class="proposal-detail-value">Mar 1, 2026</p>
                    </div>
                    <div class="proposal-detail">
                        <p class="proposal-detail-label">Lease Duration</p>
                        <p class="proposal-detail-value">6 months</p>
                    </div>
                    <div class="proposal-detail">
                        <p class="proposal-detail-label">Employment</p>
                        <p class="proposal-detail-value">Verified</p>
                    </div>
                </div>

                <div class="proposal-message">
                    <p class="proposal-message-label">Message from John D.</p>
                    <p class="proposal-message-text">
                        "Hi! I'm a remote software developer looking for a quiet space to work and live.
                        I work from home most days and keep a tidy living space. I have excellent
                        references from my previous landlords and a stable income. Looking forward to
                        hearing from you!"
                    </p>
                </div>

                <div class="modal-actions">
                    <button class="modal-btn decline" onclick="closeModal()">Decline</button>
                    <button class="modal-btn negotiate" onclick="closeModal()">Negotiate</button>
                    <!--
                    DIVERGENT: ANTICIPATION DELAY BUTTON
                    Has a progress bar that fills before action completes
                    Creates ritual weight for significant decisions
                    -->
                    <button class="modal-btn accept" id="acceptBtn" onclick="acceptProposal()">
                        Accept Proposal
                        <span class="accept-progress"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        /*
        ============================================================================
        DIVERGENT MICROINTERACTIONS - JAVASCRIPT IMPLEMENTATION

        This script implements the playful, unconventional microinteractions
        documented in the report. Each function is annotated with its purpose
        and connection to Dan Saffer's framework.
        ============================================================================
        */

        // ==========================================================================
        // STATE MANAGEMENT
        // Uses localStorage to persist user journey across sessions
        // ==========================================================================

        const state = {
            // Journey tracking
            firstVisit: localStorage.getItem('sl_firstVisit') || new Date().toISOString(),
            visitCount: parseInt(localStorage.getItem('sl_visitCount') || '0') + 1,
            listingsCreated: parseInt(localStorage.getItem('sl_listingsCreated') || '4'),
            proposalsAccepted: parseInt(localStorage.getItem('sl_proposalsAccepted') || '7'),
            totalLeases: parseInt(localStorage.getItem('sl_totalLeases') || '7'),

            // Interaction tracking
            lastVisitDay: localStorage.getItem('sl_lastVisitDay'),
            clickTimestamps: [],

            // Konami code tracking
            konamiSequence: [],
            konamiTarget: ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown',
                          'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight',
                          'KeyB', 'KeyA']
        };

        // Persist visit count
        localStorage.setItem('sl_visitCount', state.visitCount);
        localStorage.setItem('sl_firstVisit', state.firstVisit);
        localStorage.setItem('sl_lastVisitDay', new Date().toLocaleDateString('en-US', { weekday: 'long' }));

        // ==========================================================================
        // CHAPTER 1: THE GROWING WELCOME
        // Greeting evolves based on user's journey
        // ==========================================================================

        function updateGrowingWelcome() {
            const greeting = document.getElementById('welcomeGreeting');
            const subtext = document.getElementById('welcomeSubtext');
            const journeyBadge = document.getElementById('journeyBadge');

            // Calculate days as host
            const daysSinceFirst = Math.floor(
                (new Date() - new Date(state.firstVisit)) / (1000 * 60 * 60 * 24)
            );

            // DIVERGENT: Greeting evolves based on milestones
            if (state.totalLeases === 0) {
                greeting.textContent = "Welcome to Split Lease, Rod!";
                subtext.textContent = "Let's get your first listing set up.";
            } else if (state.totalLeases < 5) {
                greeting.textContent = "Welcome back, Rod!";
                subtext.textContent = "Your hosting journey is just beginning.";
            } else if (state.totalLeases < 20) {
                greeting.textContent = "The empire expands, Rod.";
                subtext.textContent = "Your listings are performing well.";
            } else if (state.totalLeases < 50) {
                greeting.textContent = "Welcome back, property mogul.";
                subtext.textContent = `${state.totalLeases} successful leases and counting.`;
            } else {
                greeting.textContent = "Legend has it you once had just one listing...";
                subtext.textContent = `Now look at you: ${state.totalLeases} leases, ${daysSinceFirst} days of hosting excellence.`;
            }

            // Journey badge
            if (daysSinceFirst > 30) {
                journeyBadge.innerHTML = `&#11088; Hosting for ${Math.floor(daysSinceFirst / 30)} months`;
                journeyBadge.style.display = 'inline-flex';
            } else if (daysSinceFirst > 7) {
                journeyBadge.innerHTML = `&#127793; ${daysSinceFirst} days as a host`;
                journeyBadge.style.display = 'inline-flex';
            }
        }

        // ==========================================================================
        // CHAPTER 2: HESITATION TRIGGERS
        // Buttons respond to prolonged hover with helpful messages
        // ==========================================================================

        function initHesitationTriggers() {
            const triggers = document.querySelectorAll('.hesitation-trigger');

            triggers.forEach(trigger => {
                let hoverTimer;

                trigger.addEventListener('mouseenter', () => {
                    // DIVERGENT: After 3 seconds of hovering, show help
                    hoverTimer = setTimeout(() => {
                        trigger.classList.add('hesitating');
                    }, 3000);
                });

                trigger.addEventListener('mouseleave', () => {
                    clearTimeout(hoverTimer);
                    trigger.classList.remove('hesitating');
                });
            });
        }

        // ==========================================================================
        // CHAPTER 2: TIRED TRIGGER
        // Buttons respond to rapid clicking with gentle pushback
        // ==========================================================================

        function initTiredTriggers() {
            const reviewBtn = document.getElementById('reviewBannerBtn');
            let clickCount = 0;
            let clickTimer;

            reviewBtn.addEventListener('click', (e) => {
                clickCount++;

                clearTimeout(clickTimer);
                clickTimer = setTimeout(() => {
                    clickCount = 0;
                }, 2000);

                // DIVERGENT: After 5 rapid clicks, show "tired" message
                if (clickCount >= 5) {
                    e.preventDefault();
                    reviewBtn.classList.add('tired');
                    setTimeout(() => {
                        reviewBtn.classList.remove('tired');
                    }, 2500);
                    clickCount = 0;
                    return;
                }

                // Normal behavior
                openModal();
            });
        }

        // ==========================================================================
        // CHAPTER 2: KONAMI CODE EASTER EGG
        // Secret sequence unlocks retro theme
        // ==========================================================================

        function initKonamiCode() {
            document.addEventListener('keydown', (e) => {
                state.konamiSequence.push(e.code);

                // Keep only last 10 keys
                if (state.konamiSequence.length > 10) {
                    state.konamiSequence.shift();
                }

                // Check if sequence matches
                if (state.konamiSequence.join(',') === state.konamiTarget.join(',')) {
                    document.documentElement.classList.toggle('konami-mode');

                    // Play celebration
                    if (document.documentElement.classList.contains('konami-mode')) {
                        createConfetti();
                        alert('LANDLORD TYCOON MODE ACTIVATED! (Press Konami code again to exit)');
                    }

                    state.konamiSequence = [];
                }
            });
        }

        // ==========================================================================
        // CHAPTER 3: PATTERN RECOGNITION
        // System notices and mentions user patterns
        // ==========================================================================

        function checkPatterns() {
            const patternNote = document.getElementById('patternNote');
            const today = new Date().toLocaleDateString('en-US', { weekday: 'long' });
            const lastDay = state.lastVisitDay;

            // DIVERGENT: Notice if user visits on same day each week
            if (lastDay === today && state.visitCount > 3) {
                patternNote.textContent = `You always check in on ${today}s. Consistency builds success.`;
                patternNote.classList.add('visible');
            }

            // Notice if checking proposals takes too long
            if (state.proposalsAccepted > 0 && state.listingsCreated > 2) {
                // Could track proposal age and show message
            }
        }

        // ==========================================================================
        // CHAPTER 4: ACCUMULATING SUCCESS DOTS
        // Golden dots appear around avatar based on successful leases
        // ==========================================================================

        function updateSuccessDots() {
            const dotsContainer = document.getElementById('successDots');
            const dotCount = Math.min(Math.floor(state.totalLeases / 3), 5); // Max 5 dots

            dotsContainer.innerHTML = '';

            for (let i = 0; i < dotCount; i++) {
                const dot = document.createElement('span');
                dot.className = 'success-dot';
                dotsContainer.appendChild(dot);
            }
        }

        // ==========================================================================
        // CHAPTER 4: THE ANTICIPATION DELAY
        // Accept button creates ritual through timed animation
        // ==========================================================================

        function acceptProposal() {
            const acceptBtn = document.getElementById('acceptBtn');

            if (acceptBtn.classList.contains('accepting')) return;

            // DIVERGENT: Add anticipation delay
            acceptBtn.classList.add('accepting');
            acceptBtn.textContent = 'Accepting...';

            // Create building anticipation
            setTimeout(() => {
                // Success!
                state.proposalsAccepted++;
                state.totalLeases++;
                localStorage.setItem('sl_proposalsAccepted', state.proposalsAccepted);
                localStorage.setItem('sl_totalLeases', state.totalLeases);

                // Update UI
                updateSuccessDots();

                // Celebration
                createConfetti();

                // Ripple effect on listing card
                document.getElementById('listing1').classList.add('rippling');
                setTimeout(() => {
                    document.getElementById('listing1').classList.remove('rippling');
                }, 800);

                // Reset button
                acceptBtn.classList.remove('accepting');
                acceptBtn.innerHTML = 'Accept Proposal<span class="accept-progress"></span>';

                // Close modal
                setTimeout(() => {
                    closeModal();
                    alert('Congratulations! Proposal accepted. John D. has been notified.');
                }, 500);

            }, 600); // Match --timing-anticipation
        }

        // ==========================================================================
        // CHAPTER 4: CONFETTI CELEBRATION
        // Visual feedback for successful actions
        // ==========================================================================

        function createConfetti() {
            const colors = ['#5B5FCF', '#31135D', '#D97706', '#FFD700'];

            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDelay = Math.random() * 0.5 + 's';
                confetti.style.width = (Math.random() * 10 + 5) + 'px';
                confetti.style.height = (Math.random() * 10 + 5) + 'px';
                confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';

                document.body.appendChild(confetti);

                // Remove after animation
                setTimeout(() => confetti.remove(), 3500);
            }
        }

        // ==========================================================================
        // CHAPTER 5: SEASONAL PALETTE SHIFT
        // UI subtly changes based on real-world season
        // ==========================================================================

        function applySeasonalPalette() {
            const month = new Date().getMonth();

            // DIVERGENT: Subtle color temperature shift by season
            if (month >= 11 || month <= 1) {
                // Winter: cooler
                document.documentElement.style.setProperty('--season-temp', '-5deg');
                document.documentElement.style.setProperty('--season-saturation', '95%');
            } else if (month >= 2 && month <= 4) {
                // Spring: fresher
                document.documentElement.style.setProperty('--season-temp', '5deg');
                document.documentElement.style.setProperty('--season-saturation', '105%');
            } else if (month >= 5 && month <= 7) {
                // Summer: warmer, brighter
                document.documentElement.style.setProperty('--season-temp', '10deg');
                document.documentElement.style.setProperty('--season-saturation', '110%');
            } else {
                // Fall: earthier
                document.documentElement.style.setProperty('--season-temp', '15deg');
                document.documentElement.style.setProperty('--season-saturation', '98%');
            }
        }

        // ==========================================================================
        // CHAPTER 6: SOCIAL SHADOWS
        // Anonymous activity indicators
        // ==========================================================================

        function updateSocialShadows() {
            const socialText = document.getElementById('socialText');
            const activeHosts = Math.floor(Math.random() * 8) + 2; // Random 2-10
            const hour = new Date().getHours();

            // Time-aware messaging
            if (hour >= 7 && hour <= 9) {
                socialText.textContent = `${activeHosts} hosts are starting their morning check-ins`;
            } else if (hour >= 18 && hour <= 21) {
                socialText.textContent = `Peak hours: ${activeHosts} hosts reviewing proposals now`;
            } else {
                socialText.textContent = `${activeHosts} other Brooklyn hosts are active right now`;
            }
        }

        // ==========================================================================
        // MODAL FUNCTIONS
        // ==========================================================================

        function openModal() {
            document.getElementById('proposalModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            document.getElementById('proposalModal').classList.remove('active');
            document.body.style.overflow = '';
        }

        // Close on overlay click
        document.getElementById('proposalModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // Close on Escape
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        });

        // ==========================================================================
        // COLLAPSIBLE SECTIONS
        // ==========================================================================

        function toggleSection(header) {
            const section = header.parentElement;
            section.classList.toggle('open');
        }

        // ==========================================================================
        // INITIALIZATION
        // Run all divergent microinteraction setups
        // ==========================================================================

        document.addEventListener('DOMContentLoaded', () => {
            // Chapter 1: Growing Welcome
            updateGrowingWelcome();

            // Chapter 2: Triggers
            initHesitationTriggers();
            initTiredTriggers();
            initKonamiCode();

            // Chapter 3: Pattern Recognition
            checkPatterns();

            // Chapter 4: Accumulating Feedback
            updateSuccessDots();

            // Chapter 5: Seasonal Mode
            applySeasonalPalette();

            // Chapter 6: Social Shadows
            updateSocialShadows();

            console.log(`
            ============================================================
            DIVERGENT MICROINTERACTIONS LOADED

            Hidden features to discover:
            - Hover over "Review Proposals" buttons for 3+ seconds
            - Click the banner button rapidly 5+ times
            - Try the Konami code: Up Up Down Down Left Right Left Right B A
            - Accept a proposal to see the celebration
            - Check back on different days of the week

            "Play is the highest form of research." - Einstein
            ============================================================
            `);
        });
    </script>

    <!--
    ============================================================================
    END OF DIVERGENT MICROINTERACTIONS MOCKUP

    IMPLEMENTED FEATURES:

    Chapter 1 - Designing Microinteractions:
    - Growing Welcome: Greeting evolves based on user journey
    - Journey Badge: Shows hosting tenure

    Chapter 2 - Triggers:
    - Hesitation Trigger: Hovering 3+ seconds reveals help
    - Tired Trigger: Rapid clicking gets gentle pushback
    - Konami Code: Secret theme unlock

    Chapter 3 - Rules:
    - Pattern Recognition: System notices repeat behaviors
    - Memory: Journey data persists in localStorage

    Chapter 4 - Feedback:
    - Accumulating Success Dots: Golden dots grow with leases
    - Anticipation Delay: Accept button has ritual timing
    - Confetti Celebration: Visual burst on success
    - Ripple Effect: Cards respond to actions

    Chapter 5 - Loops and Modes:
    - Seasonal Palette: Subtle color shift by season
    - Konami Mode: Easter egg theme toggle

    Chapter 6 - Ecosystem:
    - Social Shadows: Anonymous activity indicators
    - Time Capsule: Future self messaging (UI only)
    - Interconnected animations

    PHILOSOPHY: Every interaction should spark Recognition, Surprise,
    Pride, or Warmth. If it doesn't, delete it.

    "The details are not the details. They make the design." - Eames
    ============================================================================
    -->
</body>
</html>
